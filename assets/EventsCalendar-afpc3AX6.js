import{a as C,b as E,r as x,o as A,D as j,c as _,f as r,g as n,h as t,s as $,i as f,j as y,t as o,F as k,k as D,n as N,w as Q,p as X,m as Z,l as ee,q as te}from"./index-CgQqdtoW.js";import{u as L}from"./events-CqKkrJA0.js";import{e as V,n as se,s as T,t as F,c as ne,k as ae,h as oe,g as re,a as le,b as ie}from"./dateFormat-DGm57d66.js";import{C as ce}from"./chevron-left-DCZFZMsh.js";import{C as ue}from"./chevron-right-BSe8ZMOM.js";import{g as de}from"./imageUrl-TKHrL0N0.js";import{C as z}from"./calendar-DwpzTkRN.js";import{C as ve}from"./clock-DBQmDOzy.js";import{M as he}from"./map-pin-DA0DgWzf.js";import{U as ge}from"./users-BIXFqguo.js";import"./axios-jaFdoEDQ.js";import"./notifications-0nUPo12q.js";import"./createLucideIcon-CAmmugbc.js";function me(i){return V(i,Date.now())}function w(i,c,u){const[h,s]=se(u?.in,i,c);return+T(h)==+T(s)}function fe(i,c){const u=F(i,c?.in);return u.setDate(1),u.setHours(0,0,0,0),u}function pe(i,c){return F(i,c?.in).getDay()}function ye(i){return+F(i)<Date.now()}function Y(i,c){return w(V(i,i),me(i))}const _e={class:"bg-white rounded-2xl shadow-lg p-6"},xe={class:"flex items-center justify-between mb-6"},we={class:"text-lg font-semibold text-gray-900"},be={class:"grid grid-cols-7 gap-1 mb-2"},ke={class:"grid grid-cols-7 gap-1"},De=["onClick"],$e={class:"text-sm"},Ce={key:0,class:"absolute bottom-1 w-1.5 h-1.5 bg-secondary-500 rounded-full"},Me={key:0,class:"mt-6 pt-4 border-t border-gray-200"},Ee={class:"text-sm text-gray-600"},Fe=C({__name:"EventsCalendar",emits:["date-selected"],setup(i,{emit:c}){const{locale:u}=E(),h=L(),s=x(new Date),e=x(null),p=x([]),v=x(!1),g=c,m=async()=>{v.value=!0;try{const a=s.value.getMonth()+1,l=s.value.getFullYear(),d=await h.fetchCalendar(a,l);p.value=d||[]}catch(a){console.error("Error fetching calendar events:",a),p.value=[]}finally{v.value=!1}};A(()=>{m()}),j(s,()=>{m()});const b=_(()=>u.value==="ka"?["ორ","სამ","ოთხ","ხუთ","პარ","შაბ","კვი"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),B=_(()=>ne(s.value,"MMMM yyyy",{locale:u.value==="ka"?ae:oe})),O=_(()=>{const a=s.value.getFullYear(),l=s.value.getMonth();return new Date(a,l+1,0).getDate()}),R=_(()=>{const a=fe(s.value);return(pe(a)+6)%7}),U=()=>{s.value=new Date(s.value.getFullYear(),s.value.getMonth()-1,1)},q=()=>{s.value=new Date(s.value.getFullYear(),s.value.getMonth()+1,1)},I=a=>{if(!e.value)return!1;const l=new Date(s.value.getFullYear(),s.value.getMonth(),a);return w(l,e.value)},P=a=>{const l=new Date(s.value.getFullYear(),s.value.getMonth(),a);return Y(l)},W=a=>{const l=new Date(s.value.getFullYear(),s.value.getMonth(),a);return ye(l)&&!Y(l)},G=a=>{const l=new Date(s.value.getFullYear(),s.value.getMonth(),a);return(p.value||[]).filter(M=>{if(!M.startAt)return!1;try{const K=new Date(M.startAt);return w(K,l)}catch{return!1}}).length},S=()=>e.value?(p.value||[]).filter(l=>{if(!l.startAt)return!1;try{const d=new Date(l.startAt);return w(d,e.value)}catch{return!1}}).length:0,H=a=>{const l=new Date(s.value.getFullYear(),s.value.getMonth(),a);e.value&&w(l,e.value)?(e.value=null,g("date-selected",null)):(e.value=l,g("date-selected",l))},J=()=>{e.value=null,g("date-selected",null)};return(a,l)=>(n(),r("div",_e,[t("div",xe,[t("button",{onClick:U,class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},[f(y(ce),{class:"w-5 h-5 text-gray-600"})]),t("h2",we,o(B.value),1),t("button",{onClick:q,class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},[f(y(ue),{class:"w-5 h-5 text-gray-600"})])]),t("div",be,[(n(!0),r(k,null,D(b.value,d=>(n(),r("div",{key:d,class:"text-center text-xs font-medium text-gray-500 py-2"},o(d),1))),128))]),t("div",ke,[(n(!0),r(k,null,D(R.value,d=>(n(),r("div",{key:`empty-${d}`,class:"aspect-square"}))),128)),(n(!0),r(k,null,D(O.value,d=>(n(),r("button",{key:d,onClick:M=>H(d),class:N(["aspect-square flex flex-col items-center justify-center rounded-lg transition-all relative",I(d)?"bg-secondary-100 text-secondary-700 font-semibold":"hover:bg-gray-50 text-gray-700",P(d)?"ring-2 ring-secondary-500":"",W(d)?"opacity-50":""])},[t("span",$e,o(d),1),G(d)>0?(n(),r("div",Ce)):$("",!0)],10,De))),128))]),S()>0?(n(),r("div",Me,[t("p",Ee,o(S())+" "+o(a.$t("events.eventOnDate")),1)])):$("",!0),e.value?(n(),r("button",{key:1,onClick:J,class:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"},o(a.$t("events.clearFilter")),1)):$("",!0)]))}}),Se={class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group"},Te={class:"relative h-48 overflow-hidden"},Ye=["src","alt"],Ae={key:1,class:"w-full h-full bg-gradient-to-br from-primary-100 to-primary-200 flex items-center justify-center"},je={class:"absolute top-4 right-4"},Ne={class:"absolute bottom-4 left-4 bg-white rounded-lg px-3 py-2 shadow-lg"},Le={class:"text-2xl font-bold text-gray-900"},Ve={class:"text-xs text-gray-600 uppercase"},ze={class:"p-6"},Be={class:"inline-block px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold uppercase tracking-wide mb-3"},Oe={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},Re={class:"text-gray-600 mb-4 line-clamp-2 text-sm"},Ue={class:"space-y-2 mb-4"},qe={class:"flex items-center text-sm text-gray-500"},Ie={class:"flex items-center text-sm text-gray-500"},Pe={class:"truncate"},We={key:0,class:"flex items-center text-sm text-gray-500"},Ge=C({__name:"EventCard",props:{event:{}},setup(i){const{locale:c}=E(),u=e=>re(e),h=e=>le(e,c.value),s=e=>ie(e);return(e,p)=>{const v=Z("RouterLink");return n(),r("article",Se,[t("div",Te,[e.event.image?(n(),r("img",{key:0,src:y(de)(e.event.image),alt:e.event.title[e.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,Ye)):(n(),r("div",Ae,[f(y(z),{class:"w-16 h-16 text-primary-500"})])),t("div",je,[t("span",{class:N(["px-3 py-1 rounded-full text-xs font-semibold",e.event.price?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},o(e.event.price?`₾${e.event.price}`:e.$t("events.free")),3)]),t("div",Ne,[t("div",Le,o(u(e.event.start_date||e.event.startAt)),1),t("div",Ve,o(h(e.event.start_date||e.event.startAt)),1)])]),t("div",ze,[t("div",Be,o(e.event.type),1),t("h3",Oe,o(e.event.title[e.$i18n.locale]),1),t("p",Re,o(e.event.description[e.$i18n.locale]),1),t("div",Ue,[t("div",qe,[f(y(ve),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",null,o(s(e.event.start_date||e.event.startAt)),1)]),t("div",Ie,[f(y(he),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",Pe,o(e.event.location),1)]),e.event.capacity?(n(),r("div",We,[f(y(ge),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",null,o(e.event.capacity)+" "+o(e.$t("events.seats")),1)])):$("",!0)]),f(v,{to:{name:"event-details",params:{slug:e.event.slug||e.event.id}},class:"block w-full bg-primary-500 hover:bg-primary-600 text-white py-3 rounded-xl font-semibold transition-all duration-200 text-center group-hover:shadow-lg"},{default:Q(()=>[X(o(e.$t("events.register")),1)]),_:1},8,["to"])])])}}}),He={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Je={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Ke={key:2,class:"text-center py-16 bg-white rounded-2xl shadow-lg"},Qe={class:"text-xl font-semibold text-gray-900 mb-2"},Xe={class:"text-gray-600"},Ze=C({__name:"EventsGrid",props:{filteredDate:{}},setup(i){const c=i,u=L(),h=_(()=>u.events),s=_(()=>u.initialized);_(()=>u.loading);const e=x([]);j(()=>c.filteredDate,async v=>{if(v){const g=v.getMonth()+1,m=v.getFullYear();try{const b=await u.fetchCalendar(g,m);e.value=b||[]}catch(b){console.error("Error fetching calendar events:",b),e.value=[]}}else e.value=[]},{immediate:!0});const p=_(()=>{const v=c.filteredDate?e.value:h.value||[];return c.filteredDate?v.filter(g=>{if(!g.startAt)return!1;try{const m=new Date(g.startAt);return w(m,c.filteredDate)}catch{return!1}}):v});return A(async()=>{s.value||await u.fetchEvents()}),(v,g)=>(n(),r("div",null,[s.value?p.value?.length>0?(n(),r("div",Je,[(n(!0),r(k,null,D(p.value,m=>(n(),te(Ge,{key:m.id,event:m},null,8,["event"]))),128))])):(n(),r("div",Ke,[f(y(z),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t("h3",Qe,o(v.$t("events.noEvents")),1),t("p",Xe,o(v.$t("events.noEventsDescription")),1)])):(n(),r("div",He,[(n(),r(k,null,D(6,m=>t("div",{key:m,class:"bg-white rounded-2xl shadow-lg"},[...g[0]||(g[0]=[ee('<div class="h-48 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-1/3"></div></div>',2)])])),64))]))]))}}),et={class:"container-fluid py-12"},tt={class:"text-center mb-12"},st={class:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 font-headline"},nt={class:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed"},at={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},ot={class:"lg:col-span-1"},rt={class:"lg:col-span-3"},xt=C({__name:"EventsCalendar",setup(i){E();const c=x(null),u=h=>{c.value=h};return(h,s)=>(n(),r("div",et,[t("div",tt,[t("h1",st,o(h.$t("events.title")),1),t("p",nt,o(h.$t("events.subtitle")),1)]),t("div",at,[t("div",ot,[f(Fe,{onDateSelected:u})]),t("div",rt,[f(Ze,{filteredDate:c.value},null,8,["filteredDate"])])])]))}});export{xt as default};
