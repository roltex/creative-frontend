import{x as z,T as i,u as T,y as l,b as a,a as x,t as c,s as L,k as p,J as w,o as N,c as k,S as $,w as j,A as d,E as _,C as q,e as E,z as J,i as Q}from"./index-D4giqbAF.js";import{c as R}from"./imageUrl-TKHrL0N0-B9Kjf6s3.js";import{Q as S}from"./dateFormat-DGm57d66-C0i5cCne.js";import{G as I}from"./Pagination.vue_vue_type_script_setup_true_lang-lJ1Wg4k0-DlS3vl8i.js";import{o as M}from"./axios-BfW3-H3C-LYHUv-HN.js";import{p as A}from"./newspaper-CjZDrsx3-BhO_Yfvs.js";import{z as F}from"./news-C6jiDKWN-B9r0LaF0.js";import"./chevron-left-DZZ_sQ0y-Djdz647I.js";import"./createLucideIcon-B8jW4fWM-Bxg4yWq8.js";import"./chevron-right-BSPrKCOI-DT4Lw4wL.js";import"./notifications-Cw33WVIa-BqNy21BL.js";const H={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},K={key:1},O={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},U={class:"relative aspect-16-9 bg-gray-100 overflow-hidden"},W=["src","alt"],X={key:1,class:"w-full h-full flex items-center justify-center bg-gray-200"},Y={class:"absolute top-4 left-4"},Z={class:"px-3 py-1.5 bg-primary-500 text-white text-xs font-semibold rounded-full shadow-md uppercase tracking-wide"},B={class:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg"},D={class:"text-xs text-gray-600 text-center"},V={class:"absolute bottom-0 left-0 right-0 p-4"},tt={class:"text-lg font-bold text-white mb-1 line-clamp-2 group-hover:text-primary-200 transition-colors"},et={class:"p-6 bg-white"},at={class:"text-gray-600 mb-4 line-clamp-3"},st={class:"flex items-center justify-end"},lt={class:"text-primary-500 hover:text-primary-600 font-medium text-sm"},rt={key:2,class:"text-center py-12"},it={class:"text-lg font-semibold text-gray-900 mb-2"},ot={class:"text-gray-600"},ct=z({__name:"NewsGrid",props:{limit:{},category:{}},setup(b){const r=b,{locale:g}=L(),v=N(),P=Q(),u=p([]),y=p(!1),n=p(1),m=p(1),h=r.limit||9,C=t=>{if(r.limit)return;const e={...v.query};t>1?e.page=String(t):delete e.page,P.replace({query:e})},f=async(t=1)=>{y.value=!0;try{const e={page:t,per_page:h};r.category&&(e.category=r.category);const o=await M.get("/news",{params:e});o.data.success&&(u.value=Array.isArray(o.data.data)?o.data.data:[],o.data.meta?(n.value=o.data.meta.current_page||t,m.value=o.data.meta.last_page||1):m.value=1)}catch(e){console.error("Failed to fetch articles:",e),u.value=[]}finally{y.value=!1}};w(n,t=>{r.limit||(C(t),f(t))}),w(()=>r.category,()=>{n.value=1,f(1)});const G=t=>{if(!t)return"";const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""};return T(()=>{const t=parseInt(v.query.page),e=!r.limit&&t&&t>0?t:1;n.value=e,f(e)}),(t,e)=>{const o=J("RouterLink");return l(),i("div",null,[y.value?(l(),i("div",H,[(l(!0),i(k,null,$(d(h),s=>(l(),i("div",{key:s,class:"card"},[...e[1]||(e[1]=[j('<div class="aspect-16-9 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-1/3"></div></div>',2)])]))),128))])):u.value.length>0?(l(),i("div",K,[a("div",O,[(l(!0),i(k,null,$(u.value,s=>(l(),_(o,{key:s.id,to:{name:"news-article",params:{slug:s.slug}},class:"card-hover group block"},{default:E(()=>[a("div",U,[s.image?(l(),i("img",{key:0,src:d(R)(s.image),alt:s.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,W)):(l(),i("div",X,[x(d(A),{class:"w-16 h-16 text-gray-400"})])),e[2]||(e[2]=a("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"},null,-1)),a("div",Y,[a("span",Z,c(s.category),1)]),a("div",B,[a("div",D,c(d(S)(s.published_at||s.publishedAt,d(g))),1)]),a("div",V,[a("h3",tt,c(s.title[t.$i18n.locale]),1)])]),a("div",et,[a("p",at,c(s.excerpt?.[t.$i18n.locale]||G(s.content?.[t.$i18n.locale]||"").substring(0,150)+"..."),1),a("div",st,[a("span",lt,c(t.$t("news.readMore"))+" â†’ ",1)])])]),_:2},1032,["to"]))),128))]),!t.limit&&m.value>1?(l(),_(I,{key:0,currentPage:n.value,"onUpdate:currentPage":e[0]||(e[0]=s=>n.value=s),totalPages:m.value,class:"mt-8"},null,8,["currentPage","totalPages"])):q("",!0)])):(l(),i("div",rt,[x(d(A),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a("h3",it,c(t.$t("common.noResults")),1),a("p",ot,c(t.$t("news.noNewsAvailable")),1)]))])}}}),nt={class:"container-fluid py-12"},dt={class:"text-4xl font-bold mb-8"},kt=z({__name:"NewsList",setup(b){const r=F();return T(async()=>{r.initialized||await r.fetchArticles()}),(g,v)=>(l(),i("div",nt,[a("h1",dt,c(g.$t("news.title")),1),x(ct)]))}});export{kt as default};
