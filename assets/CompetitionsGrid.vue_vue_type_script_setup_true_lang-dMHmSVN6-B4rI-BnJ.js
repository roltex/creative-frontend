import{x as q,k as v,T as l,J as w,u as P,o as G,y as a,c as _,S as $,E as h,A as u,b as r,C as k,a as y,t as n,i as R,s as A,I as D,z as J,R as Q,e as S,g as T,w as j}from"./index-D4giqbAF.js";import{c as z}from"./imageUrl-TKHrL0N0-B9Kjf6s3.js";import{Q as E}from"./dateFormat-DGm57d66-C0i5cCne.js";import{e as C}from"./trophy-BzhVVLFN-hEdoWfYi.js";import{a as F}from"./calendar-B8aAkZ6w-BiA40Wd3.js";import{s as H}from"./_plugin-vue_export-helper-DlAUqK2U-lGy7RumW.js";import{G as K}from"./Pagination.vue_vue_type_script_setup_true_lang-lJ1Wg4k0-DlS3vl8i.js";import{o as L}from"./axios-BfW3-H3C-LYHUv-HN.js";const N={class:"card-hover group"},O={class:"aspect-square bg-gray-100 relative overflow-hidden"},U=["src","alt"],W={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},X={class:"absolute top-4 right-4"},Y={class:"p-6"},Z={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},B={class:"text-sm font-bold text-gray-900 mb-2 group-hover:text-primary-500 transition-colors leading-snug"},M={class:"space-y-2 mb-4"},V={key:0,class:"flex items-center text-sm text-gray-500"},tt=q({__name:"CompetitionCard",props:{competition:{}},setup(m){const i=m,{locale:p}=A(),f=D(()=>{switch(i.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}});return(t,d)=>{const c=J("RouterLink");return a(),l("article",N,[r("div",O,[t.competition.image?(a(),l("img",{key:0,src:u(z)(t.competition.image),alt:t.competition.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,U)):(a(),l("div",W,[y(u(C),{class:"w-16 h-16 text-primary-500"})])),r("div",X,[r("span",{class:Q(["px-3 py-1 rounded-full text-xs font-semibold",f.value])},n(t.$t(`competitions.status.${t.competition.status}`)),3)])]),r("div",Y,[t.competition.category?(a(),l("div",Z,n(t.competition.category),1)):k("",!0),r("h3",B,n(t.competition.title[t.$i18n.locale]),1),r("div",M,[t.competition.end_date||t.competition.endDate?(a(),l("div",V,[y(u(F),{class:"w-4 h-4 mr-2"}),r("span",null,n(t.$t("competitions.deadline"))+": "+n(u(E)(t.competition.end_date||t.competition.endDate,u(p))),1)])):k("",!0)]),y(c,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:S(()=>[T(n(t.competition.status==="current"?t.$t("competitions.apply"):t.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),et={},st={class:"card"};function at(m,i){return a(),l("div",st,[...i[0]||(i[0]=[j('<div class="aspect-square skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const it=H(et,[["render",at]]),ot={key:0,class:"grid md:grid-cols-2 lg:grid-cols-4 gap-6"},lt={key:1},rt={class:"grid md:grid-cols-2 lg:grid-cols-4 gap-6"},ct={key:2,class:"text-center py-12"},nt={class:"text-lg font-semibold text-gray-900 mb-2"},ut={class:"text-gray-600"},ht=q({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(m){const i=m,p=G(),f=R(),t=v([]),d=v(!1),c=v(1),g=v(1),b=i.limit||12,I=e=>{if(i.limit)return;const s={...p.query};e>1?s.page=String(e):delete s.page,f.replace({query:s})},x=async(e=1)=>{d.value=!0;try{const s={page:e,per_page:b};i.status==="current"?s.status="current":i.status==="completed"||i.status==="archive"?s.status="completed":i.status==="upcoming"&&(s.status="upcoming");const o=await L.get("/competitions",{params:s});o.data.success&&(t.value=o.data.data||[],o.data.meta?(c.value=o.data.meta.current_page||e,g.value=o.data.meta.last_page||1):g.value=1)}catch(s){console.error("Failed to fetch competitions:",s),t.value=[]}finally{d.value=!1}};return w(c,e=>{i.limit||(I(e),x(e))}),w(()=>i.status,()=>{c.value=1,x(1)}),P(()=>{const e=parseInt(p.query.page),s=!i.limit&&e&&e>0?e:1;c.value=s,x(s)}),(e,s)=>(a(),l("div",null,[d.value?(a(),l("div",ot,[(a(!0),l(_,null,$(u(b),o=>(a(),h(it,{key:o}))),128))])):t.value.length>0?(a(),l("div",lt,[r("div",rt,[(a(!0),l(_,null,$(t.value,o=>(a(),h(tt,{key:o.id,competition:o},null,8,["competition"]))),128))]),!e.limit&&g.value>1?(a(),h(K,{key:0,currentPage:c.value,"onUpdate:currentPage":s[0]||(s[0]=o=>c.value=o),totalPages:g.value,class:"mt-8"},null,8,["currentPage","totalPages"])):k("",!0)])):(a(),l("div",ct,[y(u(C),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r("h3",nt,n(e.$t("common.noResults")),1),r("p",ut,n(e.$t("competitions.noActiveCompetitions")),1)]))]))}});export{ht as _};
