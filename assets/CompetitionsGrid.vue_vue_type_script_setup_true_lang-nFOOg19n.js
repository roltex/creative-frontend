import{u as V}from"./competitions-Gyrc5X5V.js";import{a as L,b as j,c as m,f as i,g as o,h as a,j as _,i as k,n as z,t as r,s as $,w as I,p as F,m as R,l as U,r as y,D as E,o as H,F as P,k as D,q as b}from"./index-CCX3YhN4.js";import{g as q}from"./imageUrl-TKHrL0N0.js";import{T as M}from"./trophy-AxC2KsNp.js";import{C as A}from"./calendar-DZtYrpv7.js";import{f as G}from"./format-BcNypMxD.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as J}from"./Pagination.vue_vue_type_script_setup_true_lang-BjCNoP_f.js";const K={class:"card-hover group"},Q={class:"aspect-16-9 bg-gray-100 relative overflow-hidden"},W=["src","alt"],X={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},Y={class:"absolute top-4 right-4"},Z={class:"p-6"},tt={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},et={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},st=["innerHTML"],ot={class:"space-y-2 mb-4"},it={key:0,class:"flex items-center text-sm text-gray-500"},at=L({__name:"CompetitionCard",props:{competition:{}},setup(v){const e=v;j();const c=m(()=>{switch(e.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}),d=t=>{if(!t)return"";try{const n=new Date(t);return isNaN(n.getTime())?"":G(n,"MMM dd, yyyy")}catch(n){return console.error("Error formatting date:",n,t),""}};return(t,n)=>{const l=R("RouterLink");return o(),i("article",K,[a("div",Q,[t.competition.image?(o(),i("img",{key:0,src:_(q)(t.competition.image),alt:t.competition.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,W)):(o(),i("div",X,[k(_(M),{class:"w-16 h-16 text-primary-500"})])),a("div",Y,[a("span",{class:z(["px-3 py-1 rounded-full text-xs font-semibold",c.value])},r(t.$t(`competitions.status.${t.competition.status}`)),3)])]),a("div",Z,[t.competition.category?(o(),i("div",tt,r(t.competition.category),1)):$("",!0),a("h3",et,r(t.competition.title[t.$i18n.locale]),1),a("div",{class:"text-gray-600 mb-4 line-clamp-3 prose prose-sm max-w-none",innerHTML:t.competition.description[t.$i18n.locale]},null,8,st),a("div",ot,[t.competition.end_date||t.competition.endDate?(o(),i("div",it,[k(_(A),{class:"w-4 h-4 mr-2"}),a("span",null,r(t.$t("competitions.deadline"))+": "+r(d(t.competition.end_date||t.competition.endDate)),1)])):$("",!0)]),k(l,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:I(()=>[F(r(t.competition.status==="current"?t.$t("competitions.apply"):t.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),nt={},rt={class:"card"};function lt(v,e){return o(),i("div",rt,[...e[0]||(e[0]=[U('<div class="aspect-16-9 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const ct=O(nt,[["render",lt]]),ut={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},mt={key:1},dt={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},pt={key:2,class:"text-center py-12"},vt={class:"text-lg font-semibold text-gray-900 mb-2"},gt={class:"text-gray-600"},C=9,$t=L({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(v){const e=v,c=V(),{competitions:d,loading:t,initialized:n}=c,l=y([]),w=y(!1),p=y(!1),g=y(1),N=async()=>{if(!e.status){l.value=d.value||[],p.value=n.value;return}w.value=!0;try{let s=[];e.status==="current"?s=await c.fetchCurrent(e.limit||100):e.status==="completed"||e.status==="archive"?s=await c.fetchCompleted(e.limit||100):e.status==="upcoming"&&(s=await c.fetchUpcoming(e.limit||100)),l.value=s||[],p.value=!0}catch(s){console.error("Failed to fetch competitions:",s),l.value=[],p.value=!0}finally{w.value=!1}},f=m(()=>{const s=e.status?l.value:d.value||[];return e.limit&&s.length>e.limit?s.slice(0,e.limit):s}),S=m(()=>{if(e.limit)return f.value;const s=(g.value-1)*C,h=s+C;return f.value.slice(s,h)}),x=m(()=>e.limit?1:Math.ceil(f.value.length/C));E(()=>e.status,()=>{g.value=1});const T=m(()=>w.value||(e.status?!1:t.value)),B=m(()=>e.status?p.value:n.value);return H(async()=>{e.status?await N():(l.value=d.value||[],p.value=n.value)}),(s,h)=>(o(),i("div",null,[T.value||!B.value?(o(),i("div",ut,[(o(!0),i(P,null,D(s.limit||6,u=>(o(),b(ct,{key:u}))),128))])):f.value.length>0?(o(),i("div",mt,[a("div",dt,[(o(!0),i(P,null,D(S.value,u=>(o(),b(at,{key:u.id,competition:u},null,8,["competition"]))),128))]),!s.limit&&x.value>1?(o(),b(J,{key:0,currentPage:g.value,"onUpdate:currentPage":h[0]||(h[0]=u=>g.value=u),totalPages:x.value,class:"mt-8"},null,8,["currentPage","totalPages"])):$("",!0)])):(o(),i("div",pt,[k(_(M),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a("h3",vt,r(s.$t("common.noResults")),1),a("p",gt,r(s.$t("competitions.noActiveCompetitions")),1)]))]))}});export{$t as _};
