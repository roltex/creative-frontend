import{a as $,b as x,c as P,f as a,g as e,h as i,j as p,i as f,n as D,t as c,s as _,w as N,p as L,m as M,l as T,r as v,D as k,o as V,F as w,k as b,q as h}from"./index-Byv4rXtu.js";import{g as j}from"./imageUrl-TKHrL0N0.js";import{T as C}from"./trophy-DAlEM08t.js";import{C as B}from"./calendar-D7_N6-N4.js";import{f as F}from"./format-BcNypMxD.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as S}from"./Pagination.vue_vue_type_script_setup_true_lang-BxMxvgrM.js";import{a as E}from"./axios-C60ofk__.js";const H={class:"card-hover group"},I={class:"aspect-16-9 bg-gray-100 relative overflow-hidden"},U=["src","alt"],q={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},z={class:"absolute top-4 right-4"},A={class:"p-6"},G={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},O={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},J=["innerHTML"],K={class:"space-y-2 mb-4"},Q={key:0,class:"flex items-center text-sm text-gray-500"},W=$({__name:"CompetitionCard",props:{competition:{}},setup(u){const s=u;x();const m=P(()=>{switch(s.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}),d=t=>{if(!t)return"";try{const r=new Date(t);return isNaN(r.getTime())?"":F(r,"MMM dd, yyyy")}catch(r){return console.error("Error formatting date:",r,t),""}};return(t,r)=>{const g=M("RouterLink");return e(),a("article",H,[i("div",I,[t.competition.image?(e(),a("img",{key:0,src:p(j)(t.competition.image),alt:t.competition.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,U)):(e(),a("div",q,[f(p(C),{class:"w-16 h-16 text-primary-500"})])),i("div",z,[i("span",{class:D(["px-3 py-1 rounded-full text-xs font-semibold",m.value])},c(t.$t(`competitions.status.${t.competition.status}`)),3)])]),i("div",A,[t.competition.category?(e(),a("div",G,c(t.competition.category),1)):_("",!0),i("h3",O,c(t.competition.title[t.$i18n.locale]),1),i("div",{class:"text-gray-600 mb-4 line-clamp-3 prose prose-sm max-w-none",innerHTML:t.competition.description[t.$i18n.locale]},null,8,J),i("div",K,[t.competition.end_date||t.competition.endDate?(e(),a("div",Q,[f(p(B),{class:"w-4 h-4 mr-2"}),i("span",null,c(t.$t("competitions.deadline"))+": "+c(d(t.competition.end_date||t.competition.endDate)),1)])):_("",!0)]),f(g,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:N(()=>[L(c(t.competition.status==="current"?t.$t("competitions.apply"):t.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),X={},Y={class:"card"};function Z(u,s){return e(),a("div",Y,[...s[0]||(s[0]=[T('<div class="aspect-16-9 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const tt=R(X,[["render",Z]]),et={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},st={key:1},ot={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},at={key:2,class:"text-center py-12"},it={class:"text-lg font-semibold text-gray-900 mb-2"},rt={class:"text-gray-600"},vt=$({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(u){const s=u,m=v([]),d=v(!1),t=v(1),r=v(1),g=s.limit||9,y=async(l=1)=>{d.value=!0;try{const n={page:l,per_page:g};s.status==="current"?n.status="current":s.status==="completed"||s.status==="archive"?n.status="completed":s.status==="upcoming"&&(n.status="upcoming");const o=await E.get("/competitions",{params:n});o.data.success&&(m.value=o.data.data||[],o.data.meta?(t.value=o.data.meta.current_page||l,r.value=o.data.meta.last_page||1):r.value=1)}catch(n){console.error("Failed to fetch competitions:",n),m.value=[]}finally{d.value=!1}};return k(t,l=>{s.limit||y(l)}),k(()=>s.status,()=>{t.value=1,y(1)}),V(()=>{y(1)}),(l,n)=>(e(),a("div",null,[d.value?(e(),a("div",et,[(e(!0),a(w,null,b(p(g),o=>(e(),h(tt,{key:o}))),128))])):m.value.length>0?(e(),a("div",st,[i("div",ot,[(e(!0),a(w,null,b(m.value,o=>(e(),h(W,{key:o.id,competition:o},null,8,["competition"]))),128))]),!l.limit&&r.value>1?(e(),h(S,{key:0,currentPage:t.value,"onUpdate:currentPage":n[0]||(n[0]=o=>t.value=o),totalPages:r.value,class:"mt-8"},null,8,["currentPage","totalPages"])):_("",!0)])):(e(),a("div",at,[f(p(C),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i("h3",it,c(l.$t("common.noResults")),1),i("p",rt,c(l.$t("competitions.noActiveCompetitions")),1)]))]))}});export{vt as _};
