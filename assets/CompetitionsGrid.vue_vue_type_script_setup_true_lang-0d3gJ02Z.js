import{a as x,b as D,c as L,f as r,g as a,h as n,j as d,i as f,n as N,t as c,s as k,w as R,p as T,m as V,l as B,r as v,D as w,o as M,M as S,F as $,k as C,q as _,A as j}from"./index-DWH86RwT.js";import{g as F}from"./imageUrl-TKHrL0N0.js";import{f as I}from"./dateFormat-DGm57d66.js";import{T as P}from"./trophy-Ca5nRvl6.js";import{C as U}from"./calendar-Fjcp4cp_.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as H}from"./Pagination.vue_vue_type_script_setup_true_lang-BIfr6vK8.js";import{a as z}from"./axios-CbOHNgda.js";const E={class:"card-hover group"},G={class:"aspect-square bg-gray-100 relative overflow-hidden"},J=["src","alt"],K={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},O={class:"absolute top-4 right-4"},Q={class:"p-6"},W={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},X={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},Y=["innerHTML"],Z={class:"space-y-2 mb-4"},tt={key:0,class:"flex items-center text-sm text-gray-500"},et=x({__name:"CompetitionCard",props:{competition:{}},setup(m){const o=m,{locale:u}=D(),y=L(()=>{switch(o.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}});return(t,p)=>{const l=V("RouterLink");return a(),r("article",E,[n("div",G,[t.competition.image?(a(),r("img",{key:0,src:d(F)(t.competition.image),alt:t.competition.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,J)):(a(),r("div",K,[f(d(P),{class:"w-16 h-16 text-primary-500"})])),n("div",O,[n("span",{class:N(["px-3 py-1 rounded-full text-xs font-semibold",y.value])},c(t.$t(`competitions.status.${t.competition.status}`)),3)])]),n("div",Q,[t.competition.category?(a(),r("div",W,c(t.competition.category),1)):k("",!0),n("h3",X,c(t.competition.title[t.$i18n.locale]),1),n("div",{class:"text-gray-600 mb-4 line-clamp-3 prose prose-sm max-w-none",innerHTML:t.competition.description[t.$i18n.locale]},null,8,Y),n("div",Z,[t.competition.end_date||t.competition.endDate?(a(),r("div",tt,[f(d(U),{class:"w-4 h-4 mr-2"}),n("span",null,c(t.$t("competitions.deadline"))+": "+c(d(I)(t.competition.end_date||t.competition.endDate,d(u))),1)])):k("",!0)]),f(l,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:R(()=>[T(c(t.competition.status==="current"?t.$t("competitions.apply"):t.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),st={},at={class:"card"};function ot(m,o){return a(),r("div",at,[...o[0]||(o[0]=[B('<div class="aspect-square skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const it=A(st,[["render",ot]]),rt={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},nt={key:1},lt={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},ct={key:2,class:"text-center py-12"},dt={class:"text-lg font-semibold text-gray-900 mb-2"},mt={class:"text-gray-600"},kt=x({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(m){const o=m,u=S(),y=j(),t=v([]),p=v(!1),l=v(1),g=v(1),b=o.limit||9,q=e=>{if(o.limit)return;const s={...u.query};e>1?s.page=String(e):delete s.page,y.replace({query:s})},h=async(e=1)=>{p.value=!0;try{const s={page:e,per_page:b};o.status==="current"?s.status="current":o.status==="completed"||o.status==="archive"?s.status="completed":o.status==="upcoming"&&(s.status="upcoming");const i=await z.get("/competitions",{params:s});i.data.success&&(t.value=i.data.data||[],i.data.meta?(l.value=i.data.meta.current_page||e,g.value=i.data.meta.last_page||1):g.value=1)}catch(s){console.error("Failed to fetch competitions:",s),t.value=[]}finally{p.value=!1}};return w(l,e=>{o.limit||(q(e),h(e))}),w(()=>o.status,()=>{l.value=1,h(1)}),M(()=>{const e=parseInt(u.query.page),s=!o.limit&&e&&e>0?e:1;l.value=s,h(s)}),(e,s)=>(a(),r("div",null,[p.value?(a(),r("div",rt,[(a(!0),r($,null,C(d(b),i=>(a(),_(it,{key:i}))),128))])):t.value.length>0?(a(),r("div",nt,[n("div",lt,[(a(!0),r($,null,C(t.value,i=>(a(),_(et,{key:i.id,competition:i},null,8,["competition"]))),128))]),!e.limit&&g.value>1?(a(),_(H,{key:0,currentPage:l.value,"onUpdate:currentPage":s[0]||(s[0]=i=>l.value=i),totalPages:g.value,class:"mt-8"},null,8,["currentPage","totalPages"])):k("",!0)])):(a(),r("div",ct,[f(d(P),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n("h3",dt,c(e.$t("common.noResults")),1),n("p",mt,c(e.$t("competitions.noActiveCompetitions")),1)]))]))}});export{kt as _};
