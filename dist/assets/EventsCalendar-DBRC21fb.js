import{a as M,b as F,r as w,o as A,D as j,c as _,f as l,g as r,h as t,s as $,i as f,j as y,t as o,F as D,k,n as L,w as X,p as Z,m as ee,l as te,q as se}from"./index-XPNjT0tf.js";import{u as V}from"./events-LcO7aDzS.js";import{c as z,n as ne,s as S,t as T,f as C}from"./format-BcNypMxD.js";import{C as ae}from"./chevron-left-B41o34RW.js";import{C as re}from"./chevron-right-JSXhNo8d.js";import{g as oe}from"./imageUrl-BHLJlSV4.js";import{C as B}from"./calendar-C-89Cv3O.js";import{C as le}from"./clock-TaLlwrbA.js";import{M as ie}from"./map-pin-D11DLL_N.js";import{U as ce}from"./users-D-uqS6qJ.js";import"./axios-DeAq2rtN.js";import"./notifications-Bo4damYC.js";import"./createLucideIcon-CYSVw4_Y.js";function ue(i){return z(i,Date.now())}function x(i,c,u){const[v,e]=ne(u?.in,i,c);return+S(v)==+S(e)}function de(i,c){const u=T(i,c?.in);return u.setDate(1),u.setHours(0,0,0,0),u}function ve(i,c){return T(i,c?.in).getDay()}function he(i){return+T(i)<Date.now()}function Y(i,c){return x(z(i,i),ue(i))}const ge={class:"bg-white rounded-2xl shadow-lg p-6"},me={class:"flex items-center justify-between mb-6"},fe={class:"text-lg font-semibold text-gray-900"},pe={class:"grid grid-cols-7 gap-1 mb-2"},ye={class:"grid grid-cols-7 gap-1"},_e=["onClick"],we={class:"text-sm"},xe={key:0,class:"absolute bottom-1 w-1.5 h-1.5 bg-secondary-500 rounded-full"},be={key:0,class:"mt-6 pt-4 border-t border-gray-200"},De={class:"text-sm text-gray-600"},ke=M({__name:"EventsCalendar",emits:["date-selected"],setup(i,{emit:c}){const{locale:u}=F(),v=V(),e=w(new Date),s=w(null),p=w([]),h=w(!1),g=c,m=async()=>{h.value=!0;try{const n=e.value.getMonth()+1,a=e.value.getFullYear(),d=await v.fetchCalendar(n,a);p.value=d||[]}catch(n){console.error("Error fetching calendar events:",n),p.value=[]}finally{h.value=!1}};A(()=>{m()}),j(e,()=>{m()});const b=_(()=>u.value==="ka"?["ორ","სამ","ოთხ","ხუთ","პარ","შაბ","კვი"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),O=_(()=>{if(u.value==="ka"){const n=["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],a=e.value.getFullYear();return`${n[e.value.getMonth()]} ${a}`}return C(e.value,"MMMM yyyy")}),R=_(()=>{const n=e.value.getFullYear(),a=e.value.getMonth();return new Date(n,a+1,0).getDate()}),q=_(()=>{const n=de(e.value);return(ve(n)+6)%7}),I=()=>{e.value=new Date(e.value.getFullYear(),e.value.getMonth()-1,1)},P=()=>{e.value=new Date(e.value.getFullYear(),e.value.getMonth()+1,1)},U=n=>{if(!s.value)return!1;const a=new Date(e.value.getFullYear(),e.value.getMonth(),n);return x(a,s.value)},W=n=>{const a=new Date(e.value.getFullYear(),e.value.getMonth(),n);return Y(a)},G=n=>{const a=new Date(e.value.getFullYear(),e.value.getMonth(),n);return he(a)&&!Y(a)},H=n=>{const a=new Date(e.value.getFullYear(),e.value.getMonth(),n);return(p.value||[]).filter(E=>{if(!E.startAt)return!1;try{const Q=new Date(E.startAt);return x(Q,a)}catch{return!1}}).length},N=()=>s.value?(p.value||[]).filter(a=>{if(!a.startAt)return!1;try{const d=new Date(a.startAt);return x(d,s.value)}catch{return!1}}).length:0,J=n=>{const a=new Date(e.value.getFullYear(),e.value.getMonth(),n);s.value&&x(a,s.value)?(s.value=null,g("date-selected",null)):(s.value=a,g("date-selected",a))},K=()=>{s.value=null,g("date-selected",null)};return(n,a)=>(r(),l("div",ge,[t("div",me,[t("button",{onClick:I,class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},[f(y(ae),{class:"w-5 h-5 text-gray-600"})]),t("h2",fe,o(O.value),1),t("button",{onClick:P,class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},[f(y(re),{class:"w-5 h-5 text-gray-600"})])]),t("div",pe,[(r(!0),l(D,null,k(b.value,d=>(r(),l("div",{key:d,class:"text-center text-xs font-medium text-gray-500 py-2"},o(d),1))),128))]),t("div",ye,[(r(!0),l(D,null,k(q.value,d=>(r(),l("div",{key:`empty-${d}`,class:"aspect-square"}))),128)),(r(!0),l(D,null,k(R.value,d=>(r(),l("button",{key:d,onClick:E=>J(d),class:L(["aspect-square flex flex-col items-center justify-center rounded-lg transition-all relative",U(d)?"bg-secondary-100 text-secondary-700 font-semibold":"hover:bg-gray-50 text-gray-700",W(d)?"ring-2 ring-secondary-500":"",G(d)?"opacity-50":""])},[t("span",we,o(d),1),H(d)>0?(r(),l("div",xe)):$("",!0)],10,_e))),128))]),N()>0?(r(),l("div",be,[t("p",De,o(N())+" "+o(n.$t("events.eventOnDate")),1)])):$("",!0),s.value?(r(),l("button",{key:1,onClick:K,class:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"},o(n.$t("events.clearFilter")),1)):$("",!0)]))}}),$e={class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group"},Ce={class:"relative h-48 overflow-hidden"},Me=["src","alt"],Ee={key:1,class:"w-full h-full bg-gradient-to-br from-primary-100 to-primary-200 flex items-center justify-center"},Fe={class:"absolute top-4 right-4"},Te={class:"absolute bottom-4 left-4 bg-white rounded-lg px-3 py-2 shadow-lg"},Ne={class:"text-2xl font-bold text-gray-900"},Se={class:"text-xs text-gray-600 uppercase"},Ye={class:"p-6"},Ae={class:"inline-block px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold uppercase tracking-wide mb-3"},je={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},Le={class:"text-gray-600 mb-4 line-clamp-2 text-sm"},Ve={class:"space-y-2 mb-4"},ze={class:"flex items-center text-sm text-gray-500"},Be={class:"flex items-center text-sm text-gray-500"},Oe={class:"truncate"},Re={key:0,class:"flex items-center text-sm text-gray-500"},qe=M({__name:"EventCard",props:{event:{}},setup(i){F();const c=e=>{if(!e)return"";try{const s=new Date(e);return isNaN(s.getTime())?"":C(s,"dd")}catch{return""}},u=e=>{if(!e)return"";try{const s=new Date(e);return isNaN(s.getTime())?"":C(s,"MMM")}catch{return""}},v=e=>{if(!e)return"";try{const s=new Date(e);return isNaN(s.getTime())?"":C(s,"h:mm a")}catch{return""}};return(e,s)=>{const p=ee("RouterLink");return r(),l("article",$e,[t("div",Ce,[e.event.image?(r(),l("img",{key:0,src:y(oe)(e.event.image),alt:e.event.title[e.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,Me)):(r(),l("div",Ee,[f(y(B),{class:"w-16 h-16 text-primary-500"})])),t("div",Fe,[t("span",{class:L(["px-3 py-1 rounded-full text-xs font-semibold",e.event.price?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},o(e.event.price?`₾${e.event.price}`:e.$t("events.free")),3)]),t("div",Te,[t("div",Ne,o(c(e.event.start_date||e.event.startAt)),1),t("div",Se,o(u(e.event.start_date||e.event.startAt)),1)])]),t("div",Ye,[t("div",Ae,o(e.event.type),1),t("h3",je,o(e.event.title[e.$i18n.locale]),1),t("p",Le,o(e.event.description[e.$i18n.locale]),1),t("div",Ve,[t("div",ze,[f(y(le),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",null,o(v(e.event.start_date||e.event.startAt)),1)]),t("div",Be,[f(y(ie),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",Oe,o(e.event.location),1)]),e.event.capacity?(r(),l("div",Re,[f(y(ce),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",null,o(e.event.capacity)+" "+o(e.$t("events.seats")),1)])):$("",!0)]),f(p,{to:{name:"event-details",params:{slug:e.event.slug||e.event.id}},class:"block w-full bg-primary-500 hover:bg-primary-600 text-white py-3 rounded-xl font-semibold transition-all duration-200 text-center group-hover:shadow-lg"},{default:X(()=>[Z(o(e.$t("events.register")),1)]),_:1},8,["to"])])])}}}),Ie={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Pe={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Ue={key:2,class:"text-center py-16 bg-white rounded-2xl shadow-lg"},We={class:"text-xl font-semibold text-gray-900 mb-2"},Ge={class:"text-gray-600"},He=M({__name:"EventsGrid",props:{filteredDate:{}},setup(i){const c=i,u=V(),v=_(()=>u.events),e=_(()=>u.initialized);_(()=>u.loading);const s=w([]);j(()=>c.filteredDate,async h=>{if(h){const g=h.getMonth()+1,m=h.getFullYear();try{const b=await u.fetchCalendar(g,m);s.value=b||[]}catch(b){console.error("Error fetching calendar events:",b),s.value=[]}}else s.value=[]},{immediate:!0});const p=_(()=>{const h=c.filteredDate?s.value:v.value||[];return c.filteredDate?h.filter(g=>{if(!g.startAt)return!1;try{const m=new Date(g.startAt);return x(m,c.filteredDate)}catch{return!1}}):h});return A(async()=>{e.value||await u.fetchEvents()}),(h,g)=>(r(),l("div",null,[e.value?p.value?.length>0?(r(),l("div",Pe,[(r(!0),l(D,null,k(p.value,m=>(r(),se(qe,{key:m.id,event:m},null,8,["event"]))),128))])):(r(),l("div",Ue,[f(y(B),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t("h3",We,o(h.$t("events.noEvents")),1),t("p",Ge,o(h.$t("events.noEventsDescription")),1)])):(r(),l("div",Ie,[(r(),l(D,null,k(6,m=>t("div",{key:m,class:"bg-white rounded-2xl shadow-lg"},[...g[0]||(g[0]=[te('<div class="h-48 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-1/3"></div></div>',2)])])),64))]))]))}}),Je={class:"container-fluid py-12"},Ke={class:"text-center mb-12"},Qe={class:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 font-headline"},Xe={class:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed"},Ze={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},et={class:"lg:col-span-1"},tt={class:"lg:col-span-3"},mt=M({__name:"EventsCalendar",setup(i){F();const c=w(null),u=v=>{c.value=v};return(v,e)=>(r(),l("div",Je,[t("div",Ke,[t("h1",Qe,o(v.$t("events.title")),1),t("p",Xe,o(v.$t("events.subtitle")),1)]),t("div",Ze,[t("div",et,[f(ke,{onDateSelected:u})]),t("div",tt,[f(He,{filteredDate:c.value},null,8,["filteredDate"])])])]))}});export{mt as default};
