import{x as V,s as W,k as h,I as j,T as l,J as z,u as K,o as O,y as s,b as t,t as r,v as U,W as G,L as Q,a as y,A as p,c as v,S as g,C as c,i as X,R as C,e as $,g as k,j as _}from"./index-D4giqbAF.js";import{c as M}from"./imageUrl-TKHrL0N0-B9Kjf6s3.js";import{a as Y}from"./dateFormat-DGm57d66-C0i5cCne.js";import{z as Z}from"./news-C6jiDKWN-B9r0LaF0.js";import{E as ee}from"./competitions-CwgZHFF6-CVMjItY3.js";import{$ as te}from"./events-BOXGSIJ_-DxGutxoK.js";import{w as ae}from"./press-DUHyAmoK-BwGmbKvE.js";import{o as w}from"./axios-BfW3-H3C-LYHUv-HN.js";import{r as B}from"./search-ReAbfQk0-DqxdOWJn.js";import{c as le}from"./x-CfdvhGPO-CHa-oTZv.js";import"./notifications-Cw33WVIa-BqNy21BL.js";import"./createLucideIcon-B8jW4fWM-Bxg4yWq8.js";const se={class:"container-fluid py-8 lg:py-8"},re={class:"text-center mb-12"},ne={class:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 font-headline"},oe={class:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed mb-8"},ie={class:"max-w-2xl mx-auto"},ce={class:"flex flex-col sm:flex-row gap-4"},ue={class:"flex-1 relative"},de=["placeholder"],pe={class:"mt-6 flex flex-wrap justify-center gap-2"},me=["onClick"],ye={key:0},ve={key:0,class:"text-center py-12"},ge={class:"text-gray-600"},xe={key:1,class:"text-center py-12"},he={class:"text-red-500 mb-4"},fe={class:"text-gray-600"},be={key:2},ke={class:"mb-8 text-center"},we={class:"text-gray-600"},Te={class:"space-y-12"},$e={key:0},_e={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},je=["src","alt"],Ce={class:"p-6"},qe={class:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold"},Se={class:"text-lg font-bold text-gray-900 mt-3 mb-2 font-headline"},Le={key:0,class:"text-gray-600 text-sm line-clamp-2"},He={key:1},Ie={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Re=["src","alt"],Ae={class:"p-6"},Pe={class:"flex items-center justify-between mb-3"},Ee={key:0,class:"text-xs text-gray-500"},De={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},Ne=["innerHTML"],Fe={key:2},Je={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},We=["src","alt"],ze={class:"p-6"},Ke={class:"flex items-center justify-between mb-3"},Oe={class:"text-xs text-gray-500"},Ue={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},Ge=["innerHTML"],Qe={key:3},Xe={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ze={class:"flex items-center mb-4"},et=["src","alt"],tt={class:"text-sm font-semibold text-gray-700"},at={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},lt=["href"],st={key:4},rt={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},nt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ot=["src","alt"],it={class:"p-6"},ct={class:"flex items-center justify-between mb-3"},ut={key:0,class:"px-3 py-1 bg-secondary-100 text-secondary-700 rounded-full text-xs font-semibold"},dt={key:1,class:"text-xs text-gray-500"},pt={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},mt={key:0,class:"text-sm text-gray-600 mb-2"},yt={key:1,class:"text-gray-600 text-sm line-clamp-2 mb-4"},vt={key:0,class:"text-center py-12"},gt={class:"text-gray-400 mb-4"},xt={class:"text-xl font-bold text-gray-900 mb-2"},ht={class:"text-gray-600 mb-6"},ft={key:1,class:"text-center mt-12"},bt={key:1,class:"text-center"},kt={class:"text-2xl font-bold text-gray-900 mb-8 font-headline"},wt={class:"flex flex-wrap justify-center gap-3"},Tt=["onClick"],Pt=V({__name:"Search",setup($t){const x=O(),q=X(),{locale:S}=W();Z(),ee(),te(),ae();const d=h(""),f=h(!1),b=h(null),n=h({contentType:"all",category:"all",dateRange:"all"}),u=h({news:[],competitions:[],events:[],press:[],successStories:[]}),T=h({currentPage:1,hasMore:!1}),L=[{value:"all",label:{ka:"ყველა",en:"All"}},{value:"news",label:{ka:"სიახლეები",en:"News"}},{value:"competitions",label:{ka:"კონკურსები",en:"Competitions"}},{value:"events",label:{ka:"ღონისძიებები",en:"Events"}},{value:"press",label:{ka:"პრესა",en:"Press"}},{value:"success-stories",label:{ka:"წარმატების ისტორიები",en:"Success Stories"}}],R=["კონკურსები","გრანტები","ღონისძიებები","მხატვრები","მუსიკა","ფოტოგრაფია","ფილმი","თეატრი"],H=j(()=>u.value.news.length+u.value.competitions.length+u.value.events.length+u.value.press.length+u.value.successStories.length),I=j(()=>n.value.contentType!=="all"||n.value.category!=="all"),A=j(()=>T.value.hasMore),m=async(a=1)=>{if(!(!d.value.trim()&&!I.value)){f.value=!0,b.value=null;try{const o=[];(n.value.contentType==="all"||n.value.contentType==="news")&&o.push(w.get("/news",{params:{search:d.value,page:a,per_page:6}}).then(i=>({type:"news",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="competitions")&&o.push(w.get("/competitions",{params:{search:d.value,page:a,per_page:6}}).then(i=>({type:"competitions",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="events")&&o.push(w.get("/events",{params:{search:d.value,page:a,per_page:6}}).then(i=>({type:"events",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="press")&&o.push(w.get("/press",{params:{search:d.value,page:a,per_page:6}}).then(i=>({type:"press",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="success-stories")&&o.push(w.get("/success-stories",{params:{search:d.value,page:a,per_page:6}}).then(i=>({type:"successStories",data:i.data})));const e=await Promise.all(o);e.forEach(i=>{i.data.success&&(a===1?u.value[i.type]=i.data.data:u.value[i.type]=[...u.value[i.type],...i.data.data])}),T.value.currentPage=a,T.value.hasMore=e.some(i=>i.data.meta&&i.data.meta.current_page<i.data.meta.last_page),q.push({query:{...x.query,q:d.value,type:n.value.contentType!=="all"?n.value.contentType:void 0}})}catch(o){console.error("Search failed:",o),b.value=o.response?.data?.message||"Search failed"}finally{f.value=!1}}},P=a=>{n.value.contentType=a,d.value.trim()&&m(1)},E=a=>{const o=L.find(e=>e.value===a);return o?S.value==="ka"?o.label.ka:o.label.en:a},D=a=>{d.value=a,m(1)},N=()=>{d.value="",n.value.contentType="all",u.value={news:[],competitions:[],events:[],press:[],successStories:[]},q.push({query:{}})},F=()=>{m(T.value.currentPage+1)},J=()=>{};return z(()=>x.query,a=>{a.q&&(d.value=a.q,a.type&&(n.value.contentType=a.type),m(1))},{immediate:!0}),K(()=>{x.query.q&&(d.value=x.query.q,x.query.type&&(n.value.contentType=x.query.type),m(1))}),(a,o)=>(s(),l("div",se,[t("div",re,[t("h1",ne,r(a.$t("search.title")),1),t("p",oe,r(a.$t("search.subtitle")),1),t("div",ie,[t("div",ce,[t("div",ue,[U(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>d.value=e),type:"text",placeholder:a.$t("search.placeholder"),class:"w-full px-6 py-4 text-lg border border-gray-300 rounded-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pr-12",onKeyup:Q(m,["enter"]),onInput:J},null,40,de),[[G,d.value]]),t("button",{onClick:m,class:"absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-primary-500 hover:bg-primary-600 text-white rounded-full flex items-center justify-center transition-colors"},[y(p(B),{class:"w-5 h-5"})])])]),t("div",pe,[(s(),l(v,null,g(L,e=>t("button",{key:e.value,onClick:i=>P(e.value),class:C(["px-4 py-2 rounded-full text-sm font-medium transition-all",n.value.contentType===e.value?"bg-primary-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},r(a.$i18n.locale==="ka"?e.label.ka:e.label.en),11,me)),64))])])]),d.value||I.value?(s(),l("div",ye,[f.value?(s(),l("div",ve,[o[1]||(o[1]=t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"},null,-1)),t("p",ge,r(a.$t("search.searching")),1)])):b.value?(s(),l("div",xe,[t("div",he,[y(p(le),{class:"w-12 h-12 mx-auto"})]),t("p",fe,r(b.value),1),t("button",{onClick:m,class:"mt-4 px-4 py-2 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors"},r(a.$t("search.tryAgain")),1)])):(s(),l("div",be,[t("div",ke,[t("p",we,r(a.$t("search.resultsFound",{count:H.value,query:d.value,type:n.value.contentType!=="all"?E(n.value.contentType):a.$t("search.allContent")})),1)]),t("div",Te,[u.value.news.length>0&&(n.value.contentType==="all"||n.value.contentType==="news")?(s(),l("section",$e,[t("h2",_e,r(a.$t("nav.news")),1),t("div",Me,[(s(!0),l(v,null,g(u.value.news,e=>(s(),l("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(s(),l("img",{key:0,src:p(M)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,je)):c("",!0),t("div",Ce,[t("span",qe,r(e.category),1),t("h3",Se,r(a.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.excerpt?(s(),l("p",Le,r(a.$i18n.locale==="ka"?e.excerpt.ka:e.excerpt.en),1)):c("",!0),y(p(_),{to:`/news/${e.slug}`,class:"inline-flex items-center mt-4 text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:$(()=>[k(r(a.$t("common.readMore"))+" ",1),o[2]||(o[2]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),u.value.competitions.length>0&&(n.value.contentType==="all"||n.value.contentType==="competitions")?(s(),l("section",He,[t("h2",Ie,r(a.$t("nav.competitions")),1),t("div",Be,[(s(!0),l(v,null,g(u.value.competitions,e=>(s(),l("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(s(),l("img",{key:0,src:p(M)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,Re)):c("",!0),t("div",Ae,[t("div",Pe,[t("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",e.status==="current"?"bg-green-100 text-green-700":e.status==="upcoming"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},r(e.status),3),e.category?(s(),l("span",Ee,r(e.category),1)):c("",!0)]),t("h3",De,r(a.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.description?(s(),l("div",{key:0,class:"text-gray-600 text-sm line-clamp-2 mb-4",innerHTML:a.$i18n.locale==="ka"?e.description.ka:e.description.en},null,8,Ne)):c("",!0),y(p(_),{to:`/competitions/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:$(()=>[k(r(a.$t("common.learnMore"))+" ",1),o[3]||(o[3]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),u.value.events.length>0&&(n.value.contentType==="all"||n.value.contentType==="events")?(s(),l("section",Fe,[t("h2",Je,r(a.$t("nav.events")),1),t("div",Ve,[(s(!0),l(v,null,g(u.value.events,e=>(s(),l("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(s(),l("img",{key:0,src:p(M)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,We)):c("",!0),t("div",ze,[t("div",Ke,[t("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",e.status==="upcoming"?"bg-blue-100 text-blue-700":e.status==="ongoing"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},r(e.status),3),t("span",Oe,r(p(Y)(e.start_date,p(S).value)),1)]),t("h3",Ue,r(a.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.description?(s(),l("div",{key:0,class:"text-gray-600 text-sm line-clamp-2 mb-4",innerHTML:a.$i18n.locale==="ka"?e.description.ka:e.description.en},null,8,Ge)):c("",!0),y(p(_),{to:`/events/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:$(()=>[k(r(a.$t("common.learnMore"))+" ",1),o[4]||(o[4]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),u.value.press.length>0&&(n.value.contentType==="all"||n.value.contentType==="press")?(s(),l("section",Qe,[t("h2",Xe,r(a.$t("nav.press")),1),t("div",Ye,[(s(!0),l(v,null,g(u.value.press,e=>(s(),l("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all duration-300"},[t("div",Ze,[e.media_logo?(s(),l("img",{key:0,src:e.media_logo,alt:e.media_name,class:"w-8 h-8 rounded-full mr-3"},null,8,et)):c("",!0),t("span",tt,r(e.media_name),1)]),t("h3",at,r(a.$i18n.locale==="ka"?e.press_title.ka:e.press_title.en),1),e.media_link?(s(),l("a",{key:0,href:e.media_link,target:"_blank",class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},[k(r(a.$t("press.readOriginal"))+" ",1),o[5]||(o[5]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1))],8,lt)):c("",!0)]))),128))])])):c("",!0),u.value.successStories.length>0&&(n.value.contentType==="all"||n.value.contentType==="success-stories")?(s(),l("section",st,[t("h2",rt,r(a.$t("nav.successStories")),1),t("div",nt,[(s(!0),l(v,null,g(u.value.successStories,e=>(s(),l("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(s(),l("img",{key:0,src:p(M)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,ot)):c("",!0),t("div",it,[t("div",ct,[e.category?(s(),l("span",ut,r(e.category),1)):c("",!0),e.year?(s(),l("span",dt,r(e.year),1)):c("",!0)]),t("h3",pt,r(a.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.creator_name?(s(),l("p",mt,r(e.creator_name),1)):c("",!0),e.description?(s(),l("p",yt,r(a.$i18n.locale==="ka"?e.description.ka:e.description.en),1)):c("",!0),y(p(_),{to:`/success-stories/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:$(()=>[k(r(a.$t("common.readMore"))+" ",1),o[6]||(o[6]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0)]),!f.value&&!b.value&&H.value===0?(s(),l("div",vt,[t("div",gt,[y(p(B),{class:"w-16 h-16 mx-auto"})]),t("h3",xt,r(a.$t("search.noResults")),1),t("p",ht,r(a.$t("search.noResultsDesc")),1),t("button",{onClick:N,class:"px-6 py-3 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors font-semibold"},r(a.$t("search.clearSearch")),1)])):c("",!0),A.value&&!f.value?(s(),l("div",ft,[t("button",{onClick:F,class:"px-8 py-3 bg-secondary-500 text-white rounded-full hover:bg-secondary-600 transition-colors font-semibold"},r(a.$t("common.loadMore")),1)])):c("",!0)]))])):(s(),l("div",bt,[t("h2",kt,r(a.$t("search.suggestions")),1),t("div",wt,[(s(),l(v,null,g(R,e=>t("button",{key:e,onClick:i=>D(e),class:"px-4 py-2 bg-gray-100 hover:bg-primary-500 hover:text-white text-gray-700 rounded-full transition-all duration-200 text-sm"},r(e),9,Tt)),64))])]))]))}});export{Pt as default};
