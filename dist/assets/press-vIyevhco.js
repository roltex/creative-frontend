import{d as P,r as l}from"./index-CWIfwt2D.js";import{a as v}from"./axios-Dn16YkAX.js";const w=P("press",()=>{const u=l([]),f=l(null),o=l([]),c=l(!1),i=l(null),d=l(!1),t=l({media:"all",search:""}),r=l({currentPage:1,totalPages:1,perPage:12,total:0});async function n(a=1){if(c.value)return u.value;c.value=!0,i.value=null;try{const e={page:a,per_page:r.value.perPage};t.value.media!=="all"&&(e.media=t.value.media),t.value.search&&(e.search=t.value.search);const s=await v.get("/press",{params:e});if(s.data.success)u.value=s.data.data||[],s.data.meta&&(r.value={currentPage:s.data.meta.current_page||1,totalPages:s.data.meta.last_page||1,perPage:s.data.meta.per_page||12,total:s.data.meta.total||0}),d.value=!0;else throw new Error(s.data.message||"Failed to fetch press articles")}catch(e){console.error("Failed to fetch press articles:",e),i.value=e.response?.data?.message||e.message||"Failed to fetch press articles",u.value=[],d.value=!0}finally{c.value=!1}return u.value}async function g(){try{const a=await v.get("/press/media/outlets");if(a.data.success)return o.value=a.data.data,o.value}catch(a){return console.error("Failed to fetch media outlets:",a),[]}}function p(a){t.value={...t.value,...a},r.value.currentPage=1,n(1)}function m(){t.value={media:"all",search:""},r.value.currentPage=1,n(1)}async function h(){if(r.value.currentPage<r.value.totalPages&&!c.value){const a=r.value.currentPage+1,e=await n(a);e&&e.length>0&&(u.value=[...u.value,...e])}}return{articles:u,currentArticle:f,mediaOutlets:o,loading:c,error:i,initialized:d,filters:t,pagination:r,fetchArticles:n,fetchMediaOutlets:g,setFilters:p,clearFilters:m,loadMore:h}});export{w as u};
