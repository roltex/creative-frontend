import{N as h,k as s}from"./index-D4giqbAF.js";import{o as u}from"./axios-BfW3-H3C-LYHUv-HN.js";const w=h("pages",()=>{const t=s([]),n=s(null),l=s(!1),r=s(null),o=s(!1),g=s(["mission","reports","acts","contact","default"]);async function c(){if(l.value)return t.value;l.value=!0,r.value=null;try{const e=await u.get("/pages");if(e.data.success)t.value=e.data.data,o.value=!0;else throw new Error(e.data.message||"Failed to fetch pages")}catch(e){console.error("Failed to fetch pages:",e),r.value=e.response?.data?.message||e.message||"Failed to fetch pages",t.value=[]}finally{l.value=!1}return t.value}async function i(e){l.value=!0,r.value=null;try{const a=await u.get(`/pages/${e}`);if(a.data.success)return n.value=a.data.data,n.value;throw new Error(a.data.message||"Page not found")}catch(a){return console.error("Failed to fetch page:",a),r.value=a.response?.data?.message||a.message||"Failed to fetch page",n.value=null,null}finally{l.value=!1}}async function f(e){try{const a=await u.get(`/pages/template/${e}`);if(a.data.success)return a.data.data}catch(a){return console.error(`Failed to fetch ${e} pages:`,a),[]}}async function d(){try{const e=await u.get("/pages/homepage");if(e.data.success)return e.data.data}catch(e){return console.error("Failed to fetch homepage:",e),null}}function p(e){return t.value.find(a=>a.slug===e)||null}function v(e){return t.value.filter(a=>a.template===e)}return o.value||c(),{pages:t,currentPage:n,loading:l,error:r,initialized:o,templates:g,fetchPages:c,fetchPageBySlug:i,fetchPagesByTemplate:f,fetchHomepage:d,getPageBySlug:p,getPagesByTemplate:v}});export{w};
