import{x as Y,s as C,k as b,T as n,y as s,b as t,t as r,a as y,u as S,J as T,I as h,C as M,A as x,c as D,S as $,R as I,E as N,w as Q,z as X,e as Z,g as ee}from"./index-D4giqbAF.js";import{$ as R}from"./events-BOXGSIJ_-DxGutxoK.js";import{V as te,Y as E,y as W,m as F,k as ae,W as le,v as se,D as re,p as ne,$ as oe}from"./dateFormat-DGm57d66-C0i5cCne.js";import{t as ie}from"./chevron-left-DZZ_sQ0y-Djdz647I.js";import{h as ce}from"./chevron-right-BSPrKCOI-DT4Lw4wL.js";import{c as ue}from"./imageUrl-TKHrL0N0-B9Kjf6s3.js";import{a as q}from"./calendar-B8aAkZ6w-BiA40Wd3.js";import{o as ve}from"./clock-DCMJHrSj-BoRgaCIq.js";import{r as de}from"./map-pin-DdOUgARW-DMBLao3k.js";import{c as ge}from"./users-DeNRkoyI-C991X9ME.js";import"./axios-BfW3-H3C-LYHUv-HN.js";import"./createLucideIcon-B8jW4fWM-Bxg4yWq8.js";import"./notifications-Cw33WVIa-BqNy21BL.js";function fe(i){return W(i,Date.now())}function w(i,c,u){const[g,a]=te(u?.in,i,c);return+E(g)==+E(a)}function me(i,c){const u=F(i,c?.in);return u.setDate(1),u.setHours(0,0,0,0),u}function ye(i,c){return F(i,c?.in).getDay()}function pe(i){return+F(i)<Date.now()}function j(i,c){return w(W(i,i),fe(i))}const xe={class:"bg-white rounded-2xl shadow-lg p-6"},he={class:"flex items-center justify-between mb-6"},be={class:"text-lg font-semibold text-gray-900"},we={class:"grid grid-cols-7 gap-1 mb-2"},ke={class:"grid grid-cols-7 gap-1"},De=["onClick"],$e={class:"text-sm"},Me={key:0,class:"absolute bottom-1 w-1.5 h-1.5 bg-secondary-500 rounded-full"},Ye={key:0,class:"mt-6 pt-4 border-t border-gray-200"},Ce={class:"text-sm text-gray-600"},Fe=Y({__name:"EventsCalendar",emits:["date-selected"],setup(i,{emit:c}){const{locale:u}=C(),g=R(),a=b(new Date),e=b(null),p=b([]),d=b(!1),f=c,m=async()=>{d.value=!0;try{const l=a.value.getMonth()+1,o=a.value.getFullYear(),v=await g.fetchCalendar(l,o);p.value=v||[]}catch(l){console.error("Error fetching calendar events:",l),p.value=[]}finally{d.value=!1}};S(()=>{m()}),T(a,()=>{m()});const k=h(()=>u.value==="ka"?["ორ","სამ","ოთხ","ხუთ","პარ","შაბ","კვი"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),z=h(()=>re(a.value,"MMMM yyyy",{locale:u.value==="ka"?ne:oe})),J=h(()=>{const l=a.value.getFullYear(),o=a.value.getMonth();return new Date(l,o+1,0).getDate()}),G=h(()=>{const l=me(a.value);return(ye(l)+6)%7}),H=()=>{a.value=new Date(a.value.getFullYear(),a.value.getMonth()-1,1)},O=()=>{a.value=new Date(a.value.getFullYear(),a.value.getMonth()+1,1)},B=l=>{if(!e.value)return!1;const o=new Date(a.value.getFullYear(),a.value.getMonth(),l);return w(o,e.value)},K=l=>{const o=new Date(a.value.getFullYear(),a.value.getMonth(),l);return j(o)},L=l=>{const o=new Date(a.value.getFullYear(),a.value.getMonth(),l);return pe(o)&&!j(o)},P=l=>{const o=new Date(a.value.getFullYear(),a.value.getMonth(),l);return(p.value||[]).filter(v=>{if(!v.startAt)return!1;try{const A=new Date(v.startAt);return w(A,o)}catch{return!1}}).length},_=()=>e.value?(p.value||[]).filter(l=>{if(!l.startAt)return!1;try{const o=new Date(l.startAt);return w(o,e.value)}catch{return!1}}).length:0,U=l=>{const o=new Date(a.value.getFullYear(),a.value.getMonth(),l);e.value&&w(o,e.value)?(e.value=null,f("date-selected",null)):(e.value=o,f("date-selected",o))},V=()=>{e.value=null,f("date-selected",null)};return(l,o)=>(s(),n("div",xe,[t("div",he,[t("button",{onClick:H,class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},[y(x(ie),{class:"w-5 h-5 text-gray-600"})]),t("h2",be,r(z.value),1),t("button",{onClick:O,class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},[y(x(ce),{class:"w-5 h-5 text-gray-600"})])]),t("div",we,[(s(!0),n(D,null,$(k.value,v=>(s(),n("div",{key:v,class:"text-center text-xs font-medium text-gray-500 py-2"},r(v),1))),128))]),t("div",ke,[(s(!0),n(D,null,$(G.value,v=>(s(),n("div",{key:`empty-${v}`,class:"aspect-square"}))),128)),(s(!0),n(D,null,$(J.value,v=>(s(),n("button",{key:v,onClick:A=>U(v),class:I(["aspect-square flex flex-col items-center justify-center rounded-lg transition-all relative",B(v)?"bg-secondary-100 text-secondary-700 font-semibold":"hover:bg-gray-50 text-gray-700",K(v)?"ring-2 ring-secondary-500":"",L(v)?"opacity-50":""])},[t("span",$e,r(v),1),P(v)>0?(s(),n("div",Me)):M("",!0)],10,De))),128))]),_()>0?(s(),n("div",Ye,[t("p",Ce,r(_())+" "+r(l.$t("events.eventOnDate")),1)])):M("",!0),e.value?(s(),n("button",{key:1,onClick:V,class:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"},r(l.$t("events.clearFilter")),1)):M("",!0)]))}}),_e={class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group"},Ae={class:"relative h-48 overflow-hidden"},Ee=["src","alt"],je={key:1,class:"w-full h-full bg-gradient-to-br from-primary-100 to-primary-200 flex items-center justify-center"},Se={class:"absolute top-4 right-4"},Te={class:"absolute bottom-4 left-4 bg-white rounded-lg px-3 py-2 shadow-lg"},Ie={class:"text-2xl font-bold text-gray-900"},Re={class:"text-xs text-gray-600 uppercase"},We={class:"p-6"},qe={class:"inline-block px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold uppercase tracking-wide mb-3"},ze={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},Je={class:"text-gray-600 mb-4 line-clamp-2 text-sm"},Ge={class:"space-y-2 mb-4"},He={class:"flex items-center text-sm text-gray-500"},Oe={class:"flex items-center text-sm text-gray-500"},Be={class:"truncate"},Ke={key:0,class:"flex items-center text-sm text-gray-500"},Le=Y({__name:"EventCard",props:{event:{}},setup(i){const{locale:c}=C(),u=e=>ae(e),g=e=>le(e,c.value),a=e=>se(e);return(e,p)=>{const d=X("RouterLink");return s(),n("article",_e,[t("div",Ae,[e.event.image?(s(),n("img",{key:0,src:x(ue)(e.event.image),alt:e.event.title[e.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,Ee)):(s(),n("div",je,[y(x(q),{class:"w-16 h-16 text-primary-500"})])),t("div",Se,[t("span",{class:I(["px-3 py-1 rounded-full text-xs font-semibold",e.event.price?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},r(e.event.price?`₾${e.event.price}`:e.$t("events.free")),3)]),t("div",Te,[t("div",Ie,r(u(e.event.start_date||e.event.startAt)),1),t("div",Re,r(g(e.event.start_date||e.event.startAt)),1)])]),t("div",We,[t("div",qe,r(e.event.type),1),t("h3",ze,r(e.event.title[e.$i18n.locale]),1),t("p",Je,r(e.event.description[e.$i18n.locale]),1),t("div",Ge,[t("div",He,[y(x(ve),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",null,r(a(e.event.start_date||e.event.startAt)),1)]),t("div",Oe,[y(x(de),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",Be,r(e.event.location),1)]),e.event.capacity?(s(),n("div",Ke,[y(x(ge),{class:"w-4 h-4 mr-2 flex-shrink-0"}),t("span",null,r(e.event.capacity)+" "+r(e.$t("events.seats")),1)])):M("",!0)]),y(d,{to:{name:"event-details",params:{slug:e.event.slug||e.event.id}},class:"block w-full bg-primary-500 hover:bg-primary-600 text-white py-3 rounded-xl font-semibold transition-all duration-200 text-center group-hover:shadow-lg"},{default:Z(()=>[ee(r(e.$t("events.register")),1)]),_:1},8,["to"])])])}}}),Pe={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Ue={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Ve={key:2,class:"text-center py-16 bg-white rounded-2xl shadow-lg"},Ne={class:"text-xl font-semibold text-gray-900 mb-2"},Qe={class:"text-gray-600"},Xe=Y({__name:"EventsGrid",props:{filteredDate:{}},setup(i){const c=i,u=R(),g=h(()=>u.events),a=h(()=>u.initialized);h(()=>u.loading);const e=b([]);T(()=>c.filteredDate,async d=>{if(d){const f=d.getMonth()+1,m=d.getFullYear();try{const k=await u.fetchCalendar(f,m);e.value=k||[]}catch(k){console.error("Error fetching calendar events:",k),e.value=[]}}else e.value=[]},{immediate:!0});const p=h(()=>{const d=c.filteredDate?e.value:g.value||[];return c.filteredDate?d.filter(f=>{if(!f.startAt)return!1;try{const m=new Date(f.startAt);return w(m,c.filteredDate)}catch{return!1}}):d});return S(async()=>{a.value||await u.fetchEvents()}),(d,f)=>(s(),n("div",null,[a.value?p.value?.length>0?(s(),n("div",Ue,[(s(!0),n(D,null,$(p.value,m=>(s(),N(Le,{key:m.id,event:m},null,8,["event"]))),128))])):(s(),n("div",Ve,[y(x(q),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t("h3",Ne,r(d.$t("events.noEvents")),1),t("p",Qe,r(d.$t("events.noEventsDescription")),1)])):(s(),n("div",Pe,[(s(),n(D,null,$(6,m=>t("div",{key:m,class:"bg-white rounded-2xl shadow-lg"},[...f[0]||(f[0]=[Q('<div class="h-48 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-1/3"></div></div>',2)])])),64))]))]))}}),Ze={class:"container-fluid py-12"},et={class:"text-center mb-12"},tt={class:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 font-headline"},at={class:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed"},lt={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},st={class:"lg:col-span-1"},rt={class:"lg:col-span-3"},ht=Y({__name:"EventsCalendar",setup(i){C();const c=b(null),u=g=>{c.value=g};return(g,a)=>(s(),n("div",Ze,[t("div",et,[t("h1",tt,r(g.$t("events.title")),1),t("p",at,r(g.$t("events.subtitle")),1)]),t("div",lt,[t("div",st,[y(Fe,{onDateSelected:u})]),t("div",rt,[y(Xe,{filteredDate:c.value},null,8,["filteredDate"])])])]))}});export{ht as default};
