import{a as z,b as K,r as x,c as M,D as O,o as U,M as G,f as a,g as l,h as t,t as o,x as X,y as J,z as W,i as m,j as h,F as g,k as v,s as c,A as Y,n as C,w as T,p as b,R as $}from"./index-Byv4rXtu.js";import{g as S}from"./imageUrl-TKHrL0N0.js";import{u as Z}from"./news-ss4g6AkG.js";import{u as Q}from"./competitions-B-nhpCPJ.js";import{u as ee}from"./events-lYheVDfQ.js";import{u as te}from"./press-CfUtoRBm.js";import{a as k}from"./axios-C60ofk__.js";import{S as R}from"./search-Bhb6x0FA.js";import{X as se}from"./x-BbJQhR6z.js";import"./notifications-CFHlLG-Q.js";import"./createLucideIcon-BhTFkdVQ.js";const ae={class:"container-fluid py-8 lg:py-8"},le={class:"text-center mb-12"},oe={class:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 font-headline"},ne={class:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed mb-8"},re={class:"max-w-2xl mx-auto"},ie={class:"flex flex-col sm:flex-row gap-4"},ce={class:"flex-1 relative"},de=["placeholder"],ue={class:"mt-6 flex flex-wrap justify-center gap-2"},he=["onClick"],pe={key:0},me={key:0,class:"text-center py-12"},ge={class:"text-gray-600"},ve={key:1,class:"text-center py-12"},ye={class:"text-red-500 mb-4"},xe={class:"text-gray-600"},fe={key:2},_e={class:"mb-8 text-center"},be={class:"text-gray-600"},ke={class:"space-y-12"},we={key:0},Te={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},$e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Se=["src","alt"],Me={class:"p-6"},Ce={class:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold"},je={class:"text-lg font-bold text-gray-900 mt-3 mb-2 font-headline"},qe={key:0,class:"text-gray-600 text-sm line-clamp-2"},Le={key:1},Be={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Pe=["src","alt"],De={class:"p-6"},Ne={class:"flex items-center justify-between mb-3"},Ee={key:0,class:"text-xs text-gray-500"},He={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},Ve=["innerHTML"],Fe={key:2},Ie={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ze=["src","alt"],Ke={class:"p-6"},Oe={class:"flex items-center justify-between mb-3"},Ue={class:"text-xs text-gray-500"},Ge={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},Xe=["innerHTML"],Je={key:3},We={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ze={class:"flex items-center mb-4"},Qe=["src","alt"],et={class:"text-sm font-semibold text-gray-700"},tt={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},st=["href"],at={key:4},lt={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},ot={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},nt=["src","alt"],rt={class:"p-6"},it={class:"flex items-center justify-between mb-3"},ct={key:0,class:"px-3 py-1 bg-secondary-100 text-secondary-700 rounded-full text-xs font-semibold"},dt={key:1,class:"text-xs text-gray-500"},ut={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},ht={key:0,class:"text-sm text-gray-600 mb-2"},pt={key:1,class:"text-gray-600 text-sm line-clamp-2 mb-4"},mt={key:0,class:"text-center py-12"},gt={class:"text-gray-400 mb-4"},vt={class:"text-xl font-bold text-gray-900 mb-2"},yt={class:"text-gray-600 mb-6"},xt={key:1,class:"text-center mt-12"},ft={key:1,class:"text-center"},_t={class:"text-2xl font-bold text-gray-900 mb-8 font-headline"},bt={class:"flex flex-wrap justify-center gap-3"},kt=["onClick"],Dt=z({__name:"Search",setup(wt){const y=G(),j=Y(),{locale:P}=K();Z(),Q(),ee(),te();const u=x(""),f=x(!1),_=x(null),n=x({contentType:"all",category:"all",dateRange:"all"}),d=x({news:[],competitions:[],events:[],press:[],successStories:[]}),w=x({currentPage:1,hasMore:!1}),q=[{value:"all",label:{ka:"ყველა",en:"All"}},{value:"news",label:{ka:"სიახლეები",en:"News"}},{value:"competitions",label:{ka:"კონკურსები",en:"Competitions"}},{value:"events",label:{ka:"ღონისძიებები",en:"Events"}},{value:"press",label:{ka:"პრესა",en:"Press"}},{value:"success-stories",label:{ka:"წარმატების ისტორიები",en:"Success Stories"}}],D=["კონკურსები","გრანტები","ღონისძიებები","მხატვრები","მუსიკა","ფოტოგრაფია","ფილმი","თეატრი"],L=M(()=>d.value.news.length+d.value.competitions.length+d.value.events.length+d.value.press.length+d.value.successStories.length),B=M(()=>n.value.contentType!=="all"||n.value.category!=="all"),N=M(()=>w.value.hasMore),p=async(s=1)=>{if(!(!u.value.trim()&&!B.value)){f.value=!0,_.value=null;try{const r=[];(n.value.contentType==="all"||n.value.contentType==="news")&&r.push(k.get("/news",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"news",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="competitions")&&r.push(k.get("/competitions",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"competitions",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="events")&&r.push(k.get("/events",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"events",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="press")&&r.push(k.get("/press",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"press",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="success-stories")&&r.push(k.get("/success-stories",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"successStories",data:i.data})));const e=await Promise.all(r);e.forEach(i=>{i.data.success&&(s===1?d.value[i.type]=i.data.data:d.value[i.type]=[...d.value[i.type],...i.data.data])}),w.value.currentPage=s,w.value.hasMore=e.some(i=>i.data.meta&&i.data.meta.current_page<i.data.meta.last_page),j.push({query:{...y.query,q:u.value,type:n.value.contentType!=="all"?n.value.contentType:void 0}})}catch(r){console.error("Search failed:",r),_.value=r.response?.data?.message||"Search failed"}finally{f.value=!1}}},E=s=>{n.value.contentType=s,u.value.trim()&&p(1)},H=s=>{const r=q.find(e=>e.value===s);return r?P.value==="ka"?r.label.ka:r.label.en:s},V=s=>{u.value=s,p(1)},F=()=>{u.value="",n.value.contentType="all",d.value={news:[],competitions:[],events:[],press:[],successStories:[]},j.push({query:{}})},I=()=>{p(w.value.currentPage+1)},A=()=>{};return O(()=>y.query,s=>{s.q&&(u.value=s.q,s.type&&(n.value.contentType=s.type),p(1))},{immediate:!0}),U(()=>{y.query.q&&(u.value=y.query.q,y.query.type&&(n.value.contentType=y.query.type),p(1))}),(s,r)=>(l(),a("div",ae,[t("div",le,[t("h1",oe,o(s.$t("search.title")),1),t("p",ne,o(s.$t("search.subtitle")),1),t("div",re,[t("div",ie,[t("div",ce,[X(t("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),type:"text",placeholder:s.$t("search.placeholder"),class:"w-full px-6 py-4 text-lg border border-gray-300 rounded-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pr-12",onKeyup:W(p,["enter"]),onInput:A},null,40,de),[[J,u.value]]),t("button",{onClick:p,class:"absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-primary-500 hover:bg-primary-600 text-white rounded-full flex items-center justify-center transition-colors"},[m(h(R),{class:"w-5 h-5"})])])]),t("div",ue,[(l(),a(g,null,v(q,e=>t("button",{key:e.value,onClick:i=>E(e.value),class:C(["px-4 py-2 rounded-full text-sm font-medium transition-all",n.value.contentType===e.value?"bg-primary-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},o(s.$i18n.locale==="ka"?e.label.ka:e.label.en),11,he)),64))])])]),u.value||B.value?(l(),a("div",pe,[f.value?(l(),a("div",me,[r[1]||(r[1]=t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"},null,-1)),t("p",ge,o(s.$t("search.searching")),1)])):_.value?(l(),a("div",ve,[t("div",ye,[m(h(se),{class:"w-12 h-12 mx-auto"})]),t("p",xe,o(_.value),1),t("button",{onClick:p,class:"mt-4 px-4 py-2 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors"},o(s.$t("search.tryAgain")),1)])):(l(),a("div",fe,[t("div",_e,[t("p",be,o(s.$t("search.resultsFound",{count:L.value,query:u.value,type:n.value.contentType!=="all"?H(n.value.contentType):s.$t("search.allContent")})),1)]),t("div",ke,[d.value.news.length>0&&(n.value.contentType==="all"||n.value.contentType==="news")?(l(),a("section",we,[t("h2",Te,o(s.$t("nav.news")),1),t("div",$e,[(l(!0),a(g,null,v(d.value.news,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,Se)):c("",!0),t("div",Me,[t("span",Ce,o(e.category),1),t("h3",je,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.excerpt?(l(),a("p",qe,o(s.$i18n.locale==="ka"?e.excerpt.ka:e.excerpt.en),1)):c("",!0),m(h($),{to:`/news/${e.slug}`,class:"inline-flex items-center mt-4 text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.readMore"))+" ",1),r[2]||(r[2]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),d.value.competitions.length>0&&(n.value.contentType==="all"||n.value.contentType==="competitions")?(l(),a("section",Le,[t("h2",Be,o(s.$t("nav.competitions")),1),t("div",Re,[(l(!0),a(g,null,v(d.value.competitions,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,Pe)):c("",!0),t("div",De,[t("div",Ne,[t("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",e.status==="current"?"bg-green-100 text-green-700":e.status==="upcoming"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},o(e.status),3),e.category?(l(),a("span",Ee,o(e.category),1)):c("",!0)]),t("h3",He,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.description?(l(),a("div",{key:0,class:"text-gray-600 text-sm line-clamp-2 mb-4",innerHTML:s.$i18n.locale==="ka"?e.description.ka:e.description.en},null,8,Ve)):c("",!0),m(h($),{to:`/competitions/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.learnMore"))+" ",1),r[3]||(r[3]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),d.value.events.length>0&&(n.value.contentType==="all"||n.value.contentType==="events")?(l(),a("section",Fe,[t("h2",Ie,o(s.$t("nav.events")),1),t("div",Ae,[(l(!0),a(g,null,v(d.value.events,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,ze)):c("",!0),t("div",Ke,[t("div",Oe,[t("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",e.status==="upcoming"?"bg-blue-100 text-blue-700":e.status==="ongoing"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},o(e.status),3),t("span",Ue,o(new Date(e.start_date).toLocaleDateString("ka-GE")),1)]),t("h3",Ge,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.description?(l(),a("div",{key:0,class:"text-gray-600 text-sm line-clamp-2 mb-4",innerHTML:s.$i18n.locale==="ka"?e.description.ka:e.description.en},null,8,Xe)):c("",!0),m(h($),{to:`/events/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.learnMore"))+" ",1),r[4]||(r[4]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),d.value.press.length>0&&(n.value.contentType==="all"||n.value.contentType==="press")?(l(),a("section",Je,[t("h2",We,o(s.$t("nav.press")),1),t("div",Ye,[(l(!0),a(g,null,v(d.value.press,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all duration-300"},[t("div",Ze,[e.media_logo?(l(),a("img",{key:0,src:e.media_logo,alt:e.media_name,class:"w-8 h-8 rounded-full mr-3"},null,8,Qe)):c("",!0),t("span",et,o(e.media_name),1)]),t("h3",tt,o(s.$i18n.locale==="ka"?e.press_title.ka:e.press_title.en),1),e.media_link?(l(),a("a",{key:0,href:e.media_link,target:"_blank",class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},[b(o(s.$t("press.readOriginal"))+" ",1),r[5]||(r[5]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1))],8,st)):c("",!0)]))),128))])])):c("",!0),d.value.successStories.length>0&&(n.value.contentType==="all"||n.value.contentType==="success-stories")?(l(),a("section",at,[t("h2",lt,o(s.$t("nav.successStories")),1),t("div",ot,[(l(!0),a(g,null,v(d.value.successStories,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,nt)):c("",!0),t("div",rt,[t("div",it,[e.category?(l(),a("span",ct,o(e.category),1)):c("",!0),e.year?(l(),a("span",dt,o(e.year),1)):c("",!0)]),t("h3",ut,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.creator_name?(l(),a("p",ht,o(e.creator_name),1)):c("",!0),e.description?(l(),a("p",pt,o(s.$i18n.locale==="ka"?e.description.ka:e.description.en),1)):c("",!0),m(h($),{to:`/success-stories/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.readMore"))+" ",1),r[6]||(r[6]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0)]),!f.value&&!_.value&&L.value===0?(l(),a("div",mt,[t("div",gt,[m(h(R),{class:"w-16 h-16 mx-auto"})]),t("h3",vt,o(s.$t("search.noResults")),1),t("p",yt,o(s.$t("search.noResultsDesc")),1),t("button",{onClick:F,class:"px-6 py-3 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors font-semibold"},o(s.$t("search.clearSearch")),1)])):c("",!0),N.value&&!f.value?(l(),a("div",xt,[t("button",{onClick:I,class:"px-8 py-3 bg-secondary-500 text-white rounded-full hover:bg-secondary-600 transition-colors font-semibold"},o(s.$t("common.loadMore")),1)])):c("",!0)]))])):(l(),a("div",ft,[t("h2",_t,o(s.$t("search.suggestions")),1),t("div",bt,[(l(),a(g,null,v(D,e=>t("button",{key:e,onClick:i=>V(e),class:"px-4 py-2 bg-gray-100 hover:bg-primary-500 hover:text-white text-gray-700 rounded-full transition-all duration-200 text-sm"},o(e),9,kt)),64))])]))]))}});export{Dt as default};
