import{d as h,r}from"./index-DiymhA1M.js";import{a as o}from"./axios-wUvNvvHr.js";const w=h("pages",()=>{const t=r([]),l=r(null),s=r(!1),n=r(null),u=r(!1),g=r(["mission","reports","acts","contact","default"]);async function c(){if(s.value)return t.value;s.value=!0,n.value=null;try{const e=await o.get("/pages");if(e.data.success)t.value=e.data.data,u.value=!0;else throw new Error(e.data.message||"Failed to fetch pages")}catch(e){console.error("Failed to fetch pages:",e),n.value=e.response?.data?.message||e.message||"Failed to fetch pages",t.value=[]}finally{s.value=!1}return t.value}async function i(e){s.value=!0,n.value=null;try{const a=await o.get(`/pages/${e}`);if(a.data.success)return l.value=a.data.data,l.value;throw new Error(a.data.message||"Page not found")}catch(a){return console.error("Failed to fetch page:",a),n.value=a.response?.data?.message||a.message||"Failed to fetch page",l.value=null,null}finally{s.value=!1}}async function f(e){try{const a=await o.get(`/pages/template/${e}`);if(a.data.success)return a.data.data}catch(a){return console.error(`Failed to fetch ${e} pages:`,a),[]}}async function d(){try{const e=await o.get("/pages/homepage");if(e.data.success)return e.data.data}catch(e){return console.error("Failed to fetch homepage:",e),null}}function p(e){return t.value.find(a=>a.slug===e)||null}function v(e){return t.value.filter(a=>a.template===e)}return u.value||c(),{pages:t,currentPage:l,loading:s,error:n,initialized:u,templates:g,fetchPages:c,fetchPageBySlug:i,fetchPagesByTemplate:f,fetchHomepage:d,getPageBySlug:p,getPagesByTemplate:v}});export{w as u};
