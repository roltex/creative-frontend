import{a as x,b as L,c as N,f as n,g as o,h as r,j as d,i as f,n as R,t as c,s as k,w as T,p as V,m as q,l as B,r as v,D as w,o as M,M as S,F as $,k as C,q as _,A as j}from"./index-BU-eUkvY.js";import{g as F}from"./imageUrl-TKHrL0N0.js";import{f as I}from"./dateFormat-DGm57d66.js";import{T as P}from"./trophy-DLX5EzDK.js";import{C as U}from"./calendar-CPAIl8P2.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as H}from"./Pagination.vue_vue_type_script_setup_true_lang-DgrvZM7a.js";import{a as z}from"./axios-DaEDiNVl.js";const E={class:"card-hover group"},G={class:"aspect-16-9 bg-gray-100 relative overflow-hidden"},J=["src","alt"],K={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},O={class:"absolute top-4 right-4"},Q={class:"p-6"},W={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},X={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},Y=["innerHTML"],Z={class:"space-y-2 mb-4"},tt={key:0,class:"flex items-center text-sm text-gray-500"},et=x({__name:"CompetitionCard",props:{competition:{}},setup(m){const a=m,{locale:u}=L(),y=N(()=>{switch(a.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}});return(t,p)=>{const l=q("RouterLink");return o(),n("article",E,[r("div",G,[t.competition.image?(o(),n("img",{key:0,src:d(F)(t.competition.image),alt:t.competition.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,J)):(o(),n("div",K,[f(d(P),{class:"w-16 h-16 text-primary-500"})])),r("div",O,[r("span",{class:R(["px-3 py-1 rounded-full text-xs font-semibold",y.value])},c(t.$t(`competitions.status.${t.competition.status}`)),3)])]),r("div",Q,[t.competition.category?(o(),n("div",W,c(t.competition.category),1)):k("",!0),r("h3",X,c(t.competition.title[t.$i18n.locale]),1),r("div",{class:"text-gray-600 mb-4 line-clamp-3 prose prose-sm max-w-none",innerHTML:t.competition.description[t.$i18n.locale]},null,8,Y),r("div",Z,[t.competition.end_date||t.competition.endDate?(o(),n("div",tt,[f(d(U),{class:"w-4 h-4 mr-2"}),r("span",null,c(t.$t("competitions.deadline"))+": "+c(d(I)(t.competition.end_date||t.competition.endDate,d(u))),1)])):k("",!0)]),f(l,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:T(()=>[V(c(t.competition.status==="current"?t.$t("competitions.apply"):t.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),st={},ot={class:"card"};function at(m,a){return o(),n("div",ot,[...a[0]||(a[0]=[B('<div class="aspect-16-9 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const it=A(st,[["render",at]]),nt={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},rt={key:1},lt={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},ct={key:2,class:"text-center py-12"},dt={class:"text-lg font-semibold text-gray-900 mb-2"},mt={class:"text-gray-600"},kt=x({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(m){const a=m,u=S(),y=j(),t=v([]),p=v(!1),l=v(1),g=v(1),b=a.limit||9,D=e=>{if(a.limit)return;const s={...u.query};e>1?s.page=String(e):delete s.page,y.replace({query:s})},h=async(e=1)=>{p.value=!0;try{const s={page:e,per_page:b};a.status==="current"?s.status="current":a.status==="completed"||a.status==="archive"?s.status="completed":a.status==="upcoming"&&(s.status="upcoming");const i=await z.get("/competitions",{params:s});i.data.success&&(t.value=i.data.data||[],i.data.meta?(l.value=i.data.meta.current_page||e,g.value=i.data.meta.last_page||1):g.value=1)}catch(s){console.error("Failed to fetch competitions:",s),t.value=[]}finally{p.value=!1}};return w(l,e=>{a.limit||(D(e),h(e))}),w(()=>a.status,()=>{l.value=1,h(1)}),M(()=>{const e=parseInt(u.query.page),s=!a.limit&&e&&e>0?e:1;l.value=s,h(s)}),(e,s)=>(o(),n("div",null,[p.value?(o(),n("div",nt,[(o(!0),n($,null,C(d(b),i=>(o(),_(it,{key:i}))),128))])):t.value.length>0?(o(),n("div",rt,[r("div",lt,[(o(!0),n($,null,C(t.value,i=>(o(),_(et,{key:i.id,competition:i},null,8,["competition"]))),128))]),!e.limit&&g.value>1?(o(),_(H,{key:0,currentPage:l.value,"onUpdate:currentPage":s[0]||(s[0]=i=>l.value=i),totalPages:g.value,class:"mt-8"},null,8,["currentPage","totalPages"])):k("",!0)])):(o(),n("div",ct,[f(d(P),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r("h3",dt,c(e.$t("common.noResults")),1),r("p",mt,c(e.$t("competitions.noActiveCompetitions")),1)]))]))}});export{kt as _};
