import{a as C,b as D,q as a,e as n,f as c,h as u,g as f,n as N,t as d,v as k,w as R,k as V,m as B,p as L,j as S,D as b,o as j,F as w,i as $,l as _,M as F,r as v,A as I}from"./index-C6629Kvt.js";import{g as T}from"./imageUrl-TKHrL0N0.js";import{f as U}from"./dateFormat-DO1NDqP2.js";import{T as P}from"./trophy-BNu-d0vQ.js";import{C as A}from"./calendar-CKeEQyRB.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as z}from"./Pagination.vue_vue_type_script_setup_true_lang-DtqOHOqT.js";import{a as E}from"./axios-i4z66gT6.js";const G={class:"card-hover group"},H={class:"aspect-square bg-gray-100 relative overflow-hidden"},J=["src","alt"],K={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},O={class:"absolute top-4 right-4"},Q={class:"p-6"},W={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},X={class:"text-sm font-bold text-gray-900 mb-2 group-hover:text-primary-500 transition-colors leading-snug"},Y={class:"space-y-2 mb-4"},Z={key:0,class:"flex items-center text-sm text-gray-500"},tt=C({__name:"CompetitionCard",props:{competition:{}},setup(t){const o=t,{locale:m}=D(),y=B(()=>{switch(o.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}});return(r,p)=>{const l=L("RouterLink");return a(),n("article",G,[c("div",H,[t.competition.image?(a(),n("img",{key:0,src:u(T)(t.competition.image),alt:t.competition.title[r.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,J)):(a(),n("div",K,[f(u(P),{class:"w-16 h-16 text-primary-500"})])),c("div",O,[c("span",{class:N(["px-3 py-1 rounded-full text-xs font-semibold",y.value])},d(r.$t(`competitions.status.${t.competition.status}`)),3)])]),c("div",Q,[t.competition.category?(a(),n("div",W,d(t.competition.category),1)):k("",!0),c("h3",X,d(t.competition.title[r.$i18n.locale]),1),c("div",Y,[t.competition.end_date||t.competition.endDate?(a(),n("div",Z,[f(u(A),{class:"w-4 h-4 mr-2"}),c("span",null,d(r.$t("competitions.deadline"))+": "+d(u(U)(t.competition.end_date||t.competition.endDate,u(m))),1)])):k("",!0)]),f(l,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:R(()=>[V(d(t.competition.status==="current"?r.$t("competitions.apply"):r.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),et={},st={class:"card"};function at(t,o){return a(),n("div",st,[...o[0]||(o[0]=[S('<div class="aspect-square skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const ot=M(et,[["render",at]]),it={key:0,class:"grid md:grid-cols-2 lg:grid-cols-4 gap-6"},nt={key:1},rt={class:"grid md:grid-cols-2 lg:grid-cols-4 gap-6"},ct={key:2,class:"text-center py-12"},lt={class:"text-lg font-semibold text-gray-900 mb-2"},dt={class:"text-gray-600"},_t=C({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(t){const o=t,m=F(),y=I(),r=v([]),p=v(!1),l=v(1),g=v(1),x=o.limit||12,q=s=>{if(o.limit)return;const e={...m.query};s>1?e.page=String(s):delete e.page,y.replace({query:e})},h=async(s=1)=>{p.value=!0;try{const e={page:s,per_page:x};o.status==="current"?e.status="current":o.status==="completed"||o.status==="archive"?e.status="completed":o.status==="upcoming"&&(e.status="upcoming");const i=await E.get("/competitions",{params:e});i.data.success&&(r.value=i.data.data||[],i.data.meta?(l.value=i.data.meta.current_page||s,g.value=i.data.meta.last_page||1):g.value=1)}catch(e){console.error("Failed to fetch competitions:",e),r.value=[]}finally{p.value=!1}};return b(l,s=>{o.limit||(q(s),h(s))}),b(()=>o.status,()=>{l.value=1,h(1)}),j(()=>{const s=parseInt(m.query.page),e=!o.limit&&s&&s>0?s:1;l.value=e,h(e)}),(s,e)=>(a(),n("div",null,[p.value?(a(),n("div",it,[(a(!0),n(w,null,$(u(x),i=>(a(),_(ot,{key:i}))),128))])):r.value.length>0?(a(),n("div",nt,[c("div",rt,[(a(!0),n(w,null,$(r.value,i=>(a(),_(tt,{key:i.id,competition:i},null,8,["competition"]))),128))]),!t.limit&&g.value>1?(a(),_(z,{key:0,currentPage:l.value,"onUpdate:currentPage":e[0]||(e[0]=i=>l.value=i),totalPages:g.value,class:"mt-8"},null,8,["currentPage","totalPages"])):k("",!0)])):(a(),n("div",ct,[f(u(P),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c("h3",lt,d(s.$t("common.noResults")),1),c("p",dt,d(s.$t("competitions.noActiveCompetitions")),1)]))]))}});export{_t as _};
