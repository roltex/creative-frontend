import{u as M}from"./competitions-DnZV7efH.js";import{a as $,b as S,c as v,f as i,g as o,h as a,j as f,i as g,n as T,t as r,s as k,w as B,p as V,m as j,l as z,r as y,o as I,F as w,k as b,q as C}from"./index-XPNjT0tf.js";import{g as F}from"./imageUrl-BHLJlSV4.js";import{T as x}from"./trophy-VbF2PR6F.js";import{C as R}from"./calendar-C-89Cv3O.js";import{f as E}from"./format-BcNypMxD.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"card-hover group"},q={class:"aspect-16-9 bg-gray-100 relative overflow-hidden"},A=["src","alt"],G={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200"},O={class:"absolute top-4 right-4"},J={class:"p-6"},K={key:0,class:"text-xs text-primary-500 font-semibold uppercase tracking-wide mb-2"},P={class:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-500 transition-colors"},Q=["innerHTML"],W={class:"space-y-2 mb-4"},X={key:0,class:"flex items-center text-sm text-gray-500"},Y=$({__name:"CompetitionCard",props:{competition:{}},setup(u){const e=u;S();const c=v(()=>{switch(e.competition.status){case"current":return"bg-green-100 text-green-800";case"upcoming":return"bg-primary-100 text-primary-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}),m=t=>{if(!t)return"";try{const n=new Date(t);return isNaN(n.getTime())?"":E(n,"MMM dd, yyyy")}catch(n){return console.error("Error formatting date:",n,t),""}};return(t,n)=>{const l=j("RouterLink");return o(),i("article",U,[a("div",q,[t.competition.image?(o(),i("img",{key:0,src:f(F)(t.competition.image),alt:t.competition.title[t.$i18n.locale],class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,A)):(o(),i("div",G,[g(f(x),{class:"w-16 h-16 text-primary-500"})])),a("div",O,[a("span",{class:T(["px-3 py-1 rounded-full text-xs font-semibold",c.value])},r(t.$t(`competitions.status.${t.competition.status}`)),3)])]),a("div",J,[t.competition.category?(o(),i("div",K,r(t.competition.category),1)):k("",!0),a("h3",P,r(t.competition.title[t.$i18n.locale]),1),a("div",{class:"text-gray-600 mb-4 line-clamp-3 prose prose-sm max-w-none",innerHTML:t.competition.description[t.$i18n.locale]},null,8,Q),a("div",W,[t.competition.end_date||t.competition.endDate?(o(),i("div",X,[g(f(R),{class:"w-4 h-4 mr-2"}),a("span",null,r(t.$t("competitions.deadline"))+": "+r(m(t.competition.end_date||t.competition.endDate)),1)])):k("",!0)]),g(l,{to:{name:"competition-details",params:{slug:t.competition.slug}},class:"btn-primary w-full text-center"},{default:B(()=>[V(r(t.competition.status==="current"?t.$t("competitions.apply"):t.$t("common.viewDetails")),1)]),_:1},8,["to"])])])}}}),Z={},tt={class:"card"};function et(u,e){return o(),i("div",tt,[...e[0]||(e[0]=[z('<div class="aspect-16-9 skeleton"></div><div class="p-6 space-y-3"><div class="skeleton h-4 w-20"></div><div class="skeleton h-6 w-full"></div><div class="space-y-2"><div class="skeleton h-4 w-full"></div><div class="skeleton h-4 w-3/4"></div></div><div class="space-y-2"><div class="skeleton h-4 w-2/3"></div><div class="skeleton h-4 w-1/2"></div></div><div class="skeleton h-10 w-full rounded-full"></div></div>',2)])])}const st=H(Z,[["render",et]]),ot={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},it={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},at={key:2,class:"text-center py-12"},nt={class:"text-lg font-semibold text-gray-900 mb-2"},rt={class:"text-gray-600"},gt=$({__name:"CompetitionsGrid",props:{limit:{},status:{}},setup(u){const e=u,c=M(),{competitions:m,loading:t,initialized:n}=c,l=y([]),h=y(!1),d=y(!1),L=async()=>{if(!e.status){l.value=m.value||[],d.value=n.value;return}h.value=!0;try{let s=[];e.status==="current"?s=await c.fetchCurrent(e.limit||100):e.status==="completed"||e.status==="archive"?s=await c.fetchCompleted(e.limit||100):e.status==="upcoming"&&(s=await c.fetchUpcoming(e.limit||100)),l.value=s||[],d.value=!0}catch(s){console.error("Failed to fetch competitions:",s),l.value=[],d.value=!0}finally{h.value=!1}},_=v(()=>{const s=e.status?l.value:m.value||[];return e.limit&&s.length>e.limit?s.slice(0,e.limit):s}),N=v(()=>h.value||(e.status?!1:t.value)),D=v(()=>e.status?d.value:n.value);return I(async()=>{e.status?await L():(l.value=m.value||[],d.value=n.value)}),(s,lt)=>(o(),i("div",null,[N.value||!D.value?(o(),i("div",ot,[(o(!0),i(w,null,b(s.limit||6,p=>(o(),C(st,{key:p}))),128))])):_.value.length>0?(o(),i("div",it,[(o(!0),i(w,null,b(_.value,p=>(o(),C(Y,{key:p.id,competition:p},null,8,["competition"]))),128))])):(o(),i("div",at,[g(f(x),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a("h3",nt,r(s.$t("common.noResults")),1),a("p",rt,r(s.$t("competitions.noActiveCompetitions")),1)]))]))}});export{gt as _};
