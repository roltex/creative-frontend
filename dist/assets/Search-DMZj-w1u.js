import{a as z,b as K,r as x,c as M,D as O,o as U,M as X,f as a,g as l,h as t,t as o,x as G,y as J,z as W,i as m,j as h,F as g,k as v,s as c,A as Y,n as C,w as T,p as b,R as $}from"./index-DiymhA1M.js";import{g as S}from"./imageUrl-TKHrL0N0.js";import{j as Z}from"./dateFormat-DGm57d66.js";import{u as Q}from"./news-BQIPn13I.js";import{u as ee}from"./competitions-BKe8qLA2.js";import{u as te}from"./events-BpZYySJX.js";import{u as se}from"./press-BK7nzL5r.js";import{a as k}from"./axios-wUvNvvHr.js";import{S as P}from"./search-CTGWgqty.js";import{X as ae}from"./x-B3IWhAte.js";import"./notifications-DW1JB8Kg.js";import"./createLucideIcon-DqTCQKN_.js";const le={class:"container-fluid py-8 lg:py-8"},oe={class:"text-center mb-12"},ne={class:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 font-headline"},re={class:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed mb-8"},ie={class:"max-w-2xl mx-auto"},ce={class:"flex flex-col sm:flex-row gap-4"},de={class:"flex-1 relative"},ue=["placeholder"],he={class:"mt-6 flex flex-wrap justify-center gap-2"},pe=["onClick"],me={key:0},ge={key:0,class:"text-center py-12"},ve={class:"text-gray-600"},ye={key:1,class:"text-center py-12"},xe={class:"text-red-500 mb-4"},fe={class:"text-gray-600"},_e={key:2},be={class:"mb-8 text-center"},ke={class:"text-gray-600"},we={class:"space-y-12"},Te={key:0},$e={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Me=["src","alt"],Ce={class:"p-6"},je={class:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold"},qe={class:"text-lg font-bold text-gray-900 mt-3 mb-2 font-headline"},Le={key:0,class:"text-gray-600 text-sm line-clamp-2"},Be={key:1},Re={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ne=["src","alt"],De={class:"p-6"},He={class:"flex items-center justify-between mb-3"},Ve={key:0,class:"text-xs text-gray-500"},Ee={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},Fe=["innerHTML"],Ie={key:2},Ae={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},ze={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ke=["src","alt"],Oe={class:"p-6"},Ue={class:"flex items-center justify-between mb-3"},Xe={class:"text-xs text-gray-500"},Ge={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},Je=["innerHTML"],We={key:3},Ye={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},Ze={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qe={class:"flex items-center mb-4"},et=["src","alt"],tt={class:"text-sm font-semibold text-gray-700"},st={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},at=["href"],lt={key:4},ot={class:"text-2xl font-bold text-gray-900 mb-6 font-headline"},nt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},rt=["src","alt"],it={class:"p-6"},ct={class:"flex items-center justify-between mb-3"},dt={key:0,class:"px-3 py-1 bg-secondary-100 text-secondary-700 rounded-full text-xs font-semibold"},ut={key:1,class:"text-xs text-gray-500"},ht={class:"text-lg font-bold text-gray-900 mb-2 font-headline"},pt={key:0,class:"text-sm text-gray-600 mb-2"},mt={key:1,class:"text-gray-600 text-sm line-clamp-2 mb-4"},gt={key:0,class:"text-center py-12"},vt={class:"text-gray-400 mb-4"},yt={class:"text-xl font-bold text-gray-900 mb-2"},xt={class:"text-gray-600 mb-6"},ft={key:1,class:"text-center mt-12"},_t={key:1,class:"text-center"},bt={class:"text-2xl font-bold text-gray-900 mb-8 font-headline"},kt={class:"flex flex-wrap justify-center gap-3"},wt=["onClick"],Ht=z({__name:"Search",setup(Tt){const y=X(),j=Y(),{locale:q}=K();Q(),ee(),te(),se();const u=x(""),f=x(!1),_=x(null),n=x({contentType:"all",category:"all",dateRange:"all"}),d=x({news:[],competitions:[],events:[],press:[],successStories:[]}),w=x({currentPage:1,hasMore:!1}),L=[{value:"all",label:{ka:"ყველა",en:"All"}},{value:"news",label:{ka:"სიახლეები",en:"News"}},{value:"competitions",label:{ka:"კონკურსები",en:"Competitions"}},{value:"events",label:{ka:"ღონისძიებები",en:"Events"}},{value:"press",label:{ka:"პრესა",en:"Press"}},{value:"success-stories",label:{ka:"წარმატების ისტორიები",en:"Success Stories"}}],N=["კონკურსები","გრანტები","ღონისძიებები","მხატვრები","მუსიკა","ფოტოგრაფია","ფილმი","თეატრი"],B=M(()=>d.value.news.length+d.value.competitions.length+d.value.events.length+d.value.press.length+d.value.successStories.length),R=M(()=>n.value.contentType!=="all"||n.value.category!=="all"),D=M(()=>w.value.hasMore),p=async(s=1)=>{if(!(!u.value.trim()&&!R.value)){f.value=!0,_.value=null;try{const r=[];(n.value.contentType==="all"||n.value.contentType==="news")&&r.push(k.get("/news",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"news",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="competitions")&&r.push(k.get("/competitions",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"competitions",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="events")&&r.push(k.get("/events",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"events",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="press")&&r.push(k.get("/press",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"press",data:i.data}))),(n.value.contentType==="all"||n.value.contentType==="success-stories")&&r.push(k.get("/success-stories",{params:{search:u.value,page:s,per_page:6}}).then(i=>({type:"successStories",data:i.data})));const e=await Promise.all(r);e.forEach(i=>{i.data.success&&(s===1?d.value[i.type]=i.data.data:d.value[i.type]=[...d.value[i.type],...i.data.data])}),w.value.currentPage=s,w.value.hasMore=e.some(i=>i.data.meta&&i.data.meta.current_page<i.data.meta.last_page),j.push({query:{...y.query,q:u.value,type:n.value.contentType!=="all"?n.value.contentType:void 0}})}catch(r){console.error("Search failed:",r),_.value=r.response?.data?.message||"Search failed"}finally{f.value=!1}}},H=s=>{n.value.contentType=s,u.value.trim()&&p(1)},V=s=>{const r=L.find(e=>e.value===s);return r?q.value==="ka"?r.label.ka:r.label.en:s},E=s=>{u.value=s,p(1)},F=()=>{u.value="",n.value.contentType="all",d.value={news:[],competitions:[],events:[],press:[],successStories:[]},j.push({query:{}})},I=()=>{p(w.value.currentPage+1)},A=()=>{};return O(()=>y.query,s=>{s.q&&(u.value=s.q,s.type&&(n.value.contentType=s.type),p(1))},{immediate:!0}),U(()=>{y.query.q&&(u.value=y.query.q,y.query.type&&(n.value.contentType=y.query.type),p(1))}),(s,r)=>(l(),a("div",le,[t("div",oe,[t("h1",ne,o(s.$t("search.title")),1),t("p",re,o(s.$t("search.subtitle")),1),t("div",ie,[t("div",ce,[t("div",de,[G(t("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),type:"text",placeholder:s.$t("search.placeholder"),class:"w-full px-6 py-4 text-lg border border-gray-300 rounded-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pr-12",onKeyup:W(p,["enter"]),onInput:A},null,40,ue),[[J,u.value]]),t("button",{onClick:p,class:"absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-primary-500 hover:bg-primary-600 text-white rounded-full flex items-center justify-center transition-colors"},[m(h(P),{class:"w-5 h-5"})])])]),t("div",he,[(l(),a(g,null,v(L,e=>t("button",{key:e.value,onClick:i=>H(e.value),class:C(["px-4 py-2 rounded-full text-sm font-medium transition-all",n.value.contentType===e.value?"bg-primary-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},o(s.$i18n.locale==="ka"?e.label.ka:e.label.en),11,pe)),64))])])]),u.value||R.value?(l(),a("div",me,[f.value?(l(),a("div",ge,[r[1]||(r[1]=t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"},null,-1)),t("p",ve,o(s.$t("search.searching")),1)])):_.value?(l(),a("div",ye,[t("div",xe,[m(h(ae),{class:"w-12 h-12 mx-auto"})]),t("p",fe,o(_.value),1),t("button",{onClick:p,class:"mt-4 px-4 py-2 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors"},o(s.$t("search.tryAgain")),1)])):(l(),a("div",_e,[t("div",be,[t("p",ke,o(s.$t("search.resultsFound",{count:B.value,query:u.value,type:n.value.contentType!=="all"?V(n.value.contentType):s.$t("search.allContent")})),1)]),t("div",we,[d.value.news.length>0&&(n.value.contentType==="all"||n.value.contentType==="news")?(l(),a("section",Te,[t("h2",$e,o(s.$t("nav.news")),1),t("div",Se,[(l(!0),a(g,null,v(d.value.news,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,Me)):c("",!0),t("div",Ce,[t("span",je,o(e.category),1),t("h3",qe,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.excerpt?(l(),a("p",Le,o(s.$i18n.locale==="ka"?e.excerpt.ka:e.excerpt.en),1)):c("",!0),m(h($),{to:`/news/${e.slug}`,class:"inline-flex items-center mt-4 text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.readMore"))+" ",1),r[2]||(r[2]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),d.value.competitions.length>0&&(n.value.contentType==="all"||n.value.contentType==="competitions")?(l(),a("section",Be,[t("h2",Re,o(s.$t("nav.competitions")),1),t("div",Pe,[(l(!0),a(g,null,v(d.value.competitions,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,Ne)):c("",!0),t("div",De,[t("div",He,[t("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",e.status==="current"?"bg-green-100 text-green-700":e.status==="upcoming"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},o(e.status),3),e.category?(l(),a("span",Ve,o(e.category),1)):c("",!0)]),t("h3",Ee,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.description?(l(),a("div",{key:0,class:"text-gray-600 text-sm line-clamp-2 mb-4",innerHTML:s.$i18n.locale==="ka"?e.description.ka:e.description.en},null,8,Fe)):c("",!0),m(h($),{to:`/competitions/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.learnMore"))+" ",1),r[3]||(r[3]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),d.value.events.length>0&&(n.value.contentType==="all"||n.value.contentType==="events")?(l(),a("section",Ie,[t("h2",Ae,o(s.$t("nav.events")),1),t("div",ze,[(l(!0),a(g,null,v(d.value.events,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,Ke)):c("",!0),t("div",Oe,[t("div",Ue,[t("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",e.status==="upcoming"?"bg-blue-100 text-blue-700":e.status==="ongoing"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},o(e.status),3),t("span",Xe,o(h(Z)(e.start_date,h(q).value)),1)]),t("h3",Ge,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.description?(l(),a("div",{key:0,class:"text-gray-600 text-sm line-clamp-2 mb-4",innerHTML:s.$i18n.locale==="ka"?e.description.ka:e.description.en},null,8,Je)):c("",!0),m(h($),{to:`/events/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.learnMore"))+" ",1),r[4]||(r[4]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0),d.value.press.length>0&&(n.value.contentType==="all"||n.value.contentType==="press")?(l(),a("section",We,[t("h2",Ye,o(s.$t("nav.press")),1),t("div",Ze,[(l(!0),a(g,null,v(d.value.press,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all duration-300"},[t("div",Qe,[e.media_logo?(l(),a("img",{key:0,src:e.media_logo,alt:e.media_name,class:"w-8 h-8 rounded-full mr-3"},null,8,et)):c("",!0),t("span",tt,o(e.media_name),1)]),t("h3",st,o(s.$i18n.locale==="ka"?e.press_title.ka:e.press_title.en),1),e.media_link?(l(),a("a",{key:0,href:e.media_link,target:"_blank",class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},[b(o(s.$t("press.readOriginal"))+" ",1),r[5]||(r[5]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1))],8,at)):c("",!0)]))),128))])])):c("",!0),d.value.successStories.length>0&&(n.value.contentType==="all"||n.value.contentType==="success-stories")?(l(),a("section",lt,[t("h2",ot,o(s.$t("nav.successStories")),1),t("div",nt,[(l(!0),a(g,null,v(d.value.successStories,e=>(l(),a("div",{key:e.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300"},[e.image?(l(),a("img",{key:0,src:h(S)(e.image),alt:e.title.ka,class:"w-full h-48 object-cover"},null,8,rt)):c("",!0),t("div",it,[t("div",ct,[e.category?(l(),a("span",dt,o(e.category),1)):c("",!0),e.year?(l(),a("span",ut,o(e.year),1)):c("",!0)]),t("h3",ht,o(s.$i18n.locale==="ka"?e.title.ka:e.title.en),1),e.creator_name?(l(),a("p",pt,o(e.creator_name),1)):c("",!0),e.description?(l(),a("p",mt,o(s.$i18n.locale==="ka"?e.description.ka:e.description.en),1)):c("",!0),m(h($),{to:`/success-stories/${e.slug}`,class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-sm"},{default:T(()=>[b(o(s.$t("common.readMore"))+" ",1),r[6]||(r[6]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])])]))),128))])])):c("",!0)]),!f.value&&!_.value&&B.value===0?(l(),a("div",gt,[t("div",vt,[m(h(P),{class:"w-16 h-16 mx-auto"})]),t("h3",yt,o(s.$t("search.noResults")),1),t("p",xt,o(s.$t("search.noResultsDesc")),1),t("button",{onClick:F,class:"px-6 py-3 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors font-semibold"},o(s.$t("search.clearSearch")),1)])):c("",!0),D.value&&!f.value?(l(),a("div",ft,[t("button",{onClick:I,class:"px-8 py-3 bg-secondary-500 text-white rounded-full hover:bg-secondary-600 transition-colors font-semibold"},o(s.$t("common.loadMore")),1)])):c("",!0)]))])):(l(),a("div",_t,[t("h2",bt,o(s.$t("search.suggestions")),1),t("div",kt,[(l(),a(g,null,v(N,e=>t("button",{key:e,onClick:i=>E(e),class:"px-4 py-2 bg-gray-100 hover:bg-primary-500 hover:text-white text-gray-700 rounded-full transition-all duration-200 text-sm"},o(e),9,wt)),64))])]))]))}});export{Ht as default};
