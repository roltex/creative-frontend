import{N as P,k as s}from"./index-D4giqbAF.js";import{o as v}from"./axios-BfW3-H3C-LYHUv-HN.js";const F=P("press",()=>{const u=s([]),g=s(null),i=s([]),c=s(!1),o=s(null),d=s(!1),t=s({media:"all",search:""}),l=s({currentPage:1,totalPages:1,perPage:12,total:0});async function n(a=1){if(c.value)return u.value;c.value=!0,o.value=null;try{const e={page:a,per_page:l.value.perPage};t.value.media!=="all"&&(e.media=t.value.media),t.value.search&&(e.search=t.value.search);const r=await v.get("/press",{params:e});if(r.data.success)u.value=r.data.data||[],r.data.meta&&(l.value={currentPage:r.data.meta.current_page||1,totalPages:r.data.meta.last_page||1,perPage:r.data.meta.per_page||12,total:r.data.meta.total||0}),d.value=!0;else throw new Error(r.data.message||"Failed to fetch press articles")}catch(e){console.error("Failed to fetch press articles:",e),o.value=e.response?.data?.message||e.message||"Failed to fetch press articles",u.value=[],d.value=!0}finally{c.value=!1}return u.value}async function p(){try{const a=await v.get("/press/media/outlets");if(a.data.success)return i.value=a.data.data,i.value}catch(a){return console.error("Failed to fetch media outlets:",a),[]}}function f(a){t.value={...t.value,...a},l.value.currentPage=1,n(1)}function m(){t.value={media:"all",search:""},l.value.currentPage=1,n(1)}async function h(){if(l.value.currentPage<l.value.totalPages&&!c.value){const a=l.value.currentPage+1,e=await n(a);e&&e.length>0&&(u.value=[...u.value,...e])}}return{articles:u,currentArticle:g,mediaOutlets:i,loading:c,error:o,initialized:d,filters:t,pagination:l,fetchArticles:n,fetchMediaOutlets:p,setFilters:f,clearFilters:m,loadMore:h}});export{F as w};
